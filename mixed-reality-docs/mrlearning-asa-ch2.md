---
title: Mr Learning ASA-Modul Azure Spatial Anchor on hololens 2
description: In diesem Kurs erfahren Sie, wie Sie die Azure-Gesichtserkennung in einer Mixed Reality-Anwendung implementieren.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: Mixed Reality, Unity, Tutorial, HoloLens
ms.openlocfilehash: b263d30905c5a1ba81bfb59ba6a49c7710c43869
ms.sourcegitcommit: b086d7a62ee0c7913aa8f66c90e9d2527f270264
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/25/2019
ms.locfileid: "68485740"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="54401-104">2. Speichern, abrufen und Freigeben von räumlichen Azure-Ankern</span><span class="sxs-lookup"><span data-stu-id="54401-104">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="54401-105">In diesem Tutorial erfahren Sie, wie Sie unsere räumlichen Azure-Anker in mehreren App-Sitzungen speichern, indem Sie die Anker Informationen auf dem Datenträger von hololens 2 speichern.</span><span class="sxs-lookup"><span data-stu-id="54401-105">In this tutorial, we will learn how to save our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's disk.</span></span> <span data-ttu-id="54401-106">Außerdem erfahren Sie, wie Sie diese Anker Informationen für eine Ausrichtung auf mehrere Geräte verankern für andere Geräte freigeben.</span><span class="sxs-lookup"><span data-stu-id="54401-106">We will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="54401-107">Ziele</span><span class="sxs-lookup"><span data-stu-id="54401-107">Objectives</span></span>

* <span data-ttu-id="54401-108">Erfahren Sie, wie Sie Informationen zum räumlichen Azure-Anker aus dem lokalen Datenträger hololens 2 speichern und für die Persistenz zwischen App-Sitzungen abrufen.</span><span class="sxs-lookup"><span data-stu-id="54401-108">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>

* <span data-ttu-id="54401-109">Erfahren Sie, wie Sie Azure Spatial Anchor-Informationen zwischen Benutzern in einem Szenario mit mehreren Geräten freigeben.</span><span class="sxs-lookup"><span data-stu-id="54401-109">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

## <a name="instructions"></a><span data-ttu-id="54401-110">Anweisungen</span><span class="sxs-lookup"><span data-stu-id="54401-110">Instructions</span></span>

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="54401-111">Beibehalten von Azure-Ankern zwischen App-Sitzungen: Anker-ID auf Datenträger speichern</span><span class="sxs-lookup"><span data-stu-id="54401-111">Persist Azure Anchors Between App Sessions - Save Anchor ID to Disk</span></span>

1. <span data-ttu-id="54401-112">Suchen Sie nach der vorfab saveanchoresdisk, und fügen Sie Sie Ihrer Szene hinzu.</span><span class="sxs-lookup"><span data-stu-id="54401-112">Search for and add the SaveAnchorToDisk prefab to your scene.</span></span> <span data-ttu-id="54401-113">Hierzu gehören zwei Schaltflächen, eine Schaltfläche zum Speichern sämtlicher verfügbarer Azure-Anker-IDs auf dem Datenträger hololens 2 und eine weitere zum Abrufen von IDs vom Datenträger.</span><span class="sxs-lookup"><span data-stu-id="54401-113">These include two buttons, one button for saving any available Azure Anchor IDs to the HoloLens 2 disk, and another for retrieving any IDs from the disk.</span></span>

![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="54401-115">Konfigurieren Sie jede Schaltfläche gemäß den folgenden Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="54401-115">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="54401-116">Erstellen Sie für die Schaltfläche mit dem Namen saveondisk ein neues Ereignis unter dem Tastendruck-Ereignis-und dem Click-Ereignis-auslöst.</span><span class="sxs-lookup"><span data-stu-id="54401-116">For the Button named SaveToDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="54401-117">Ziehen Sie das Objekt "objeanchor" in das leere Feld, und weisen Sie die saveazureanchoriddedisk ()-Methode aus der asamodulescript-Komponente des Objektanker Objekts zu.</span><span class="sxs-lookup"><span data-stu-id="54401-117">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>
   
     > <span data-ttu-id="54401-118">Hinweis: einige der Schaltflächen werden möglicherweise überlappen, die anderen Schaltflächen in der Szene.</span><span class="sxs-lookup"><span data-stu-id="54401-118">Note: some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="54401-119">Sie können die Positionierung der Schaltfläche anpassen.</span><span class="sxs-lookup"><span data-stu-id="54401-119">Feel free to adjust the button's positioning.</span></span>

![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)


   - <span data-ttu-id="54401-123">Erstellen Sie für die Schaltfläche getfromdisk ein neues Ereignis sowohl unter dem Schaltflächen-gedrückten Ereignis-als auch auf dem Click-Ereignis-Auslösers.</span><span class="sxs-lookup"><span data-stu-id="54401-123">For the Button named GetFromDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="54401-124">Ziehen Sie das Objekt "objeanchor" in das leere Feld, und weisen Sie die Methode "loadazureanchoridsfromdisk ()" aus der Komponente "asamodulescript" des Objekts "Objektanchor" zu.</span><span class="sxs-lookup"><span data-stu-id="54401-124">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="54401-125">Befolgen Sie die Anweisungen von tuum 1, um die aktualisierte Anwendung auf Ihrem Gerät zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="54401-125">Follow the instructions from Tutoiral 1 to build the updated application to your device.</span></span> <span data-ttu-id="54401-126">Nachdem Sie die Schaltfläche Azure Anchor erstellen wie in der vorherigen Lektion gedrückt haben, können Sie die Azure-Anker-ID jetzt auf dem Datenträger speichern, indem Sie die Schaltfläche auf Datenträger speichern drücken.</span><span class="sxs-lookup"><span data-stu-id="54401-126">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="54401-127">Starten Sie die Anwendung neu, starten Sie die Azure-Sitzung, klicken Sie auf Anker-ID laden, und klicken Sie dann auf Azure-Anker suchen, um den Anker zu suchen, der der ID zugeordnet ist, die wir</span><span class="sxs-lookup"><span data-stu-id="54401-127">Restart the application, start the Azure Session, Press Load Anchor ID, and then press Locate Azure Anchor to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="54401-128">Die gesamte Szene sollte nun an der Position, an der Sie den Anker zuvor gespeichert haben, an der Position andocken.</span><span class="sxs-lookup"><span data-stu-id="54401-128">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

### <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="54401-129">Freigeben von Azure-Ankern für mehrere Geräte</span><span class="sxs-lookup"><span data-stu-id="54401-129">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="54401-130">In diesem Abschnitt erfahren Sie, wie Sie die Azure-Anker-ID für mehrere Geräte freigeben.</span><span class="sxs-lookup"><span data-stu-id="54401-130">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="54401-131">Dies ermöglicht es mehreren Geräten, Azure nach der gleichen Anker-ID abzufragen, sodass die verankerten Hologramme und Szenen räumlich ausgerichtet werden können.</span><span class="sxs-lookup"><span data-stu-id="54401-131">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="54401-132">Die räumliche Ausrichtung (das sehen der gleichen holograms am gleichen physischen Standort zwischen mehreren Geräten) ist der Schlüssel für die lokale gemeinsame Nutzung in den hololens 2.</span><span class="sxs-lookup"><span data-stu-id="54401-132">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="54401-133">Es gibt viele Methoden zum Übertragen von Informationen in Bezug auf Azure-IDs zwischen Geräten, einschließlich der Methoden, die in den Azure Spatial Anchor-Lernprogrammen (TODO: Add Link) beschrieben werden. In diesem Beispiel wird ein einfacher Webdienst zum Hochladen und Herunterladen von Anker-IDs zwischen Geräten verwendet.</span><span class="sxs-lookup"><span data-stu-id="54401-133">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials (TODO: add link.) This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="54401-134">Fügen Sie der-Hierarchie den Share Anchor-präfab hinzu.</span><span class="sxs-lookup"><span data-stu-id="54401-134">Add the ShareAnchor prefab into your hierarchy.</span></span> <span data-ttu-id="54401-135">Diese Prefab fügt Ihrer Szene zwei neue Schaltflächen hinzu. eine zum Hochladen von Anker-ID-Informationen und eine weitere zum Herunterladen der Anker-ID</span><span class="sxs-lookup"><span data-stu-id="54401-135">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span> 

![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="54401-137">Konfigurieren Sie jede Schaltfläche gemäß den folgenden Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="54401-137">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="54401-138">Erstellen Sie für die Schaltfläche sendsharedanchor ein neues Ereignis unter dem gedrückten Ereignis-und aktivierten Ereignis-Auslösers.</span><span class="sxs-lookup"><span data-stu-id="54401-138">For the Button named, SendSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="54401-139">Ziehen Sie das Objekt "objeanchor" in das leere Feld, und weisen Sie die shareanchor ()-Methode aus der asamodulescript-Komponente des Objektanchor-Objekts zu.</span><span class="sxs-lookup"><span data-stu-id="54401-139">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

   - <span data-ttu-id="54401-142">Erstellen Sie für die Schaltfläche getsharedanchor ein neues Ereignis unter dem Befehl Schaltfläche mit gedrücktem Ereignis und dem Click-Ereignis auslöst.</span><span class="sxs-lookup"><span data-stu-id="54401-142">For the Button named, GetSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="54401-143">Ziehen Sie das Objekt "objeanchor" in das leere Feld, und weisen Sie die Methode "getsharedazureanchor ()" aus der Komponente "asamodulescript" des Objekts "Objektanchor" zu.</span><span class="sxs-lookup"><span data-stu-id="54401-143">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="54401-144">Befolgen Sie die Anweisungen im [Tutorial 1](mrlearning-base-ch1.md).</span><span class="sxs-lookup"><span data-stu-id="54401-144">Follow the instructions from [Tutorial 1](mrlearning-base-ch1.md).</span></span> <span data-ttu-id="54401-145">zum Erstellen der aktualisierten Anwendung auf Ihrem Gerät.</span><span class="sxs-lookup"><span data-stu-id="54401-145">to build the updated application to your device.</span></span> <span data-ttu-id="54401-146">Nachdem Sie die Schaltfläche Azure Anchor erstellen wie in der vorherigen Lektion gedrückt haben, können Sie nun die Azure-Anker-ID für andere Geräte freigeben, indem Sie die Schaltfläche auf anderes Gerät freigeben drücken.</span><span class="sxs-lookup"><span data-stu-id="54401-146">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

   > <span data-ttu-id="54401-147">Hinweis: Wählen Sie den übergeordneten Anker aus, und Scrollen Sie nach unten zum übergeordneten Anker Skript.</span><span class="sxs-lookup"><span data-stu-id="54401-147">Note: Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="54401-148">Stellen Sie sicher, dass ihre öffentliche Freigabe-Pin eindeutig ist, sodass Sie, wenn Sie Sie freigeben, wissen, dass Sie die Freigabe haben.</span><span class="sxs-lookup"><span data-stu-id="54401-148">Ensure that your public sharing pin is unique, so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="54401-149">Es könnten tausende von Benutzern geben, die ihre Azure-Anker gemeinsam nutzen. Dadurch können Sie sicherstellen, dass Sie die richtigen Azure-Anker gemeinsam nutzen.</span><span class="sxs-lookup"><span data-stu-id="54401-149">There could be thousands of users sharing their Azure anchors, so doing this will allow you to ensure you are sharing the correct Azure anchors.</span></span>

4. <span data-ttu-id="54401-150">Wenn Sie ein anderes hololens 2-Gerät haben, starten Sie die Anwendung, und starten Sie dann die Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="54401-150">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="54401-151">Klicken Sie auf die Schaltfläche "freigegebene Anker-ID", und klicken Sie dann auf die Schaltfläche "Azure-Anker suchen", um den Anker zu suchen, der der ID zugeordnet ist</span><span class="sxs-lookup"><span data-stu-id="54401-151">Press the Get Shared Anchor ID button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="54401-152">Die gesamte Szene sollte nun an der Position, an der Sie auf dem anderen hololens 2-Gerät platziert wurde, an der Position andocken.</span><span class="sxs-lookup"><span data-stu-id="54401-152">The entire scene should now snap into position, at the where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="54401-153">Wenn Sie nur über ein hololens 2 verfügen, können Sie die Funktionalität weiterhin testen, indem Sie die Anwendung neu starten, die Azure-Sitzung starten und dann die Schaltfläche "freigegebene Anker-ID erhalten" drücken und dann auf die Schaltfläche "Azure-Anker suchen" klicken, um den Anker zu suchen, der dem ID, die auf dem Datenträger gespeichert wurde.</span><span class="sxs-lookup"><span data-stu-id="54401-153">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then Press the "Get Shared Anchor ID" button button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="54401-154">Die gesamte Szene sollte nun an der Position, an der Sie den Anker zuvor gespeichert haben, an der Position andocken.</span><span class="sxs-lookup"><span data-stu-id="54401-154">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="54401-155">Herzlichen Glückwunsch!</span><span class="sxs-lookup"><span data-stu-id="54401-155">Congratulations</span></span>
<span data-ttu-id="54401-156">In dieser Lektion haben Sie erfahren, wie Sie räumliche Azure-Anker zwischen Anwendungs Sitzungen und Anwendungs Neustarts beibehalten, indem Sie die räumliche Azure-Anker-ID auf dem lokalen Datenträger auf hololens 2 speichern.</span><span class="sxs-lookup"><span data-stu-id="54401-156">In this Lesson you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens 2.</span></span> <span data-ttu-id="54401-157">Außerdem haben Sie erfahren, wie Sie räumliche Azure-Anker zwischen mehreren Geräten für eine grundlegende freigegebene multibenutzerbenutzerfunktion mit mehreren Benutzern freigeben.</span><span class="sxs-lookup"><span data-stu-id="54401-157">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="54401-158">Wir erfahren, wie Sie räumliche Azure-Anker im Rahmen einer vollständig interaktiven, freigegebenen Umgebung in der letzten Lektion des Freigabe Moduls implementieren.</span><span class="sxs-lookup"><span data-stu-id="54401-158">We learn how to implement Azure Spatial Anchors as part of a fully interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="54401-159">Eine lokale Freigabe kann Funktionen wie die synchronisierte 3D-Objektposition,-Rotation und-Skalierung, Bezeichner für jeden Benutzer und den Status der freigegebenen Anwendungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="54401-159">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="54401-160">Azure Spatial Anchor erweitert diese freigegebenen Szenarien, indem jeder Teilnehmer einen gemeinsamen Anker bereitstellt, mit dem alle Benutzer virtuelle Objekte am gleichen physischen Speicherort sehen können.</span><span class="sxs-lookup"><span data-stu-id="54401-160">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor that lets all users see virtual objects in the same physical location.</span></span> <span data-ttu-id="54401-161">Dies gilt für verschiedene Geräte Plattformen, einschließlich hololens-, Android-und IOS-Geräten.</span><span class="sxs-lookup"><span data-stu-id="54401-161">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="54401-162">Um zu erfahren, wie Sie eine freigegebene Darstellung entwickeln, vervollständigen Sie alle Lektionen im Freigabe Modul.</span><span class="sxs-lookup"><span data-stu-id="54401-162">To learn how to develop a shared experience, complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="54401-163">In der nächsten Lektion erfahren Sie, wie Sie Benutzern Echtzeitfeedback bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="54401-163">In the next Lesson, we will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="54401-164">Dieses Feedback enthält Informationen zur Anker Erstellung, zur Qualität des Verständnisses der Umgebung und zum Status der Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="54401-164">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="54401-165">Ohne Feedback wissen Benutzer möglicherweise nicht, ob ein Anker erfolgreich in Azure hochgeladen wurde, ob die Qualität der Umgebung für die Anker Erstellung ausreichend ist oder ob der aktuelle Zustand ist.</span><span class="sxs-lookup"><span data-stu-id="54401-165">Without feedback, users may not know whether an anchor has successfully been upload to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="54401-166">Nächste Lektion: 3. Anzeigen des Azure Spatial Anchor-Feedbacks</span><span class="sxs-lookup"><span data-stu-id="54401-166">Next Lesson: 3. Displaying Azure Spatial Anchor feedback</span></span>](mrlearning-asa-ch3.md)

