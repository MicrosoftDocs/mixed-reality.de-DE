---
title: 'Tutorials zu Azure Spatial Anchors: 2 Speichern, Abrufen und Freigeben von Azure Spatial Anchors'
description: In diesem Kurs erfahren Sie, wie Sie die Azure-Gesichtserkennung in einer Mixed Reality-Anwendung implementieren.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: Mixed Reality, Unity, Tutorial, HoloLens
ms.localizationpriority: high
ms.openlocfilehash: 36f25229469e848a3f0612a5971cc8e9381262f5
ms.sourcegitcommit: 9df82dba06a91a8d2cedbe38a4328f8b86bb2146
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/29/2020
ms.locfileid: "80362011"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="0b7ad-105">2. Speichern, Abrufen und Freigeben von Azure Spatial Anchors</span><span class="sxs-lookup"><span data-stu-id="0b7ad-105">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="0b7ad-106">In diesem Tutorial erfahren Sie, wie Sie Azure Spatial Anchors über mehrere App-Sitzungen hinweg speichern, indem Sie die Anker-ID im Speicher von HoloLens 2 speichern.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-106">In this tutorial, you will learn how to save Azure Spatial Anchors across multiple app sessions by saving the anchor ID to the HoloLens 2's storage.</span></span> <span data-ttu-id="0b7ad-107">Darüber hinaus erfahren Sie, wie Sie diese Anker-ID für für andere Geräte freigeben, um eine Ankerausrichtung auf mehreren Geräten zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-107">You will also learn how to share this anchor ID to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="0b7ad-108">Ziele</span><span class="sxs-lookup"><span data-stu-id="0b7ad-108">Objectives</span></span>

* <span data-ttu-id="0b7ad-109">Erfahren Sie, wie Sie Azure Spatial Anchor IDs auf dem lokalen Datenträger von HoloLens 2 speichern und abrufen, um Persistenz zwischen App-Sitzungen zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-109">Learn how to save and retrieve Azure Spatial Anchor IDs to and from the HoloLens 2 local disk, for persistence between app sessions</span></span>
* <span data-ttu-id="0b7ad-110">Erfahren Sie, wie Azure Spatial Anchor IDs zwischen Benutzern in einem Mehrgeräteszenario geteilt werden können</span><span class="sxs-lookup"><span data-stu-id="0b7ad-110">Learn how to share Azure Spatial Anchor IDs between users in a multi-device scenario</span></span>

## <a name="preparing-the-scene"></a><span data-ttu-id="0b7ad-111">Vorbereiten der Szene</span><span class="sxs-lookup"><span data-stu-id="0b7ad-111">Preparing the scene</span></span>

<span data-ttu-id="0b7ad-112">Navigieren Sie im Projektfenster zum Ordner **Assets** > **MRTK.Tutorials.AzureSpatialAnchors** > **Prefabs**.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-112">In the Project window, navigate to **Assets** > **MRTK.Tutorials.AzureSpatialAnchors** > **Prefabs** folder.</span></span> <span data-ttu-id="0b7ad-113">Klicken Sie bei gedrückter STRG-Taste auf **ButtonParent_SaveAnchorId** und **ButtonParent_ShareAnchorId**, um die beiden Prefabs auszuwählen, und ziehen Sie sie dann auf das Hierarchiefenster, um sie der Szene hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-113">While holding down the CTRL button, click on **ButtonParent_SaveAnchorId** and **ButtonParent_ShareAnchorId** to select the two prefabs, then drag them into the Hierarchy window to add them to the scene:</span></span>

![mrlearning-asa](images/mrlearning-asa/tutorial2-section1-step1-1.png)

## <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="0b7ad-115">Bewahren von Azure Anchors zwischen App-Sitzungen: Speichern der Anchor ID auf Datenträgern</span><span class="sxs-lookup"><span data-stu-id="0b7ad-115">Persist Azure Anchors between app sessions - Save anchor ID to disk</span></span>
<!-- TODO: Consider renaming to 'Persist Azure Anchors between app sessions' -->

<span data-ttu-id="0b7ad-116">In diesem Abschnitt erfahren Sie, wie Sie die Azure Anchor ID auf der lokalen Festplatte der HoloLens 2 speichern und abrufen.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-116">In this section, you will learn how to save and retrieve the Azure Anchor ID to and from the HoloLens 2 local disk.</span></span> <span data-ttu-id="0b7ad-117">Dies ermöglicht es Ihnen, in verschiedenen App-Sitzungen die gleiche Anchor ID bei Azure abzufragen, was die Positionierung verankerter Hologramme an der gleichen Position wie in der vorhergehenden App-Sitzung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-117">This will allow you to query Azure for the same anchor ID between different app sessions, allowing the anchored holograms to be position at the same location as in the previous app session.</span></span>

<span data-ttu-id="0b7ad-118">Erweitern Sie im Hierarchiefenster das **ButtonParent_SaveAnchorId**-Objekt, das zwei Schaltflächen enthält, eine Schaltfläche zum Speichern der Azure Anchor ID im Speicher der HoloLens 2 und eine weitere zum Abrufen der gespeicherten ID vom Datenträger:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-118">In the Hierarchy window, expand the **ButtonParent_SaveAnchorId** object which contains two buttons, one button for saving the Azure Anchor ID to the HoloLens 2 storage and another for retrieving the saved ID from the disk:</span></span>

![mrlearning-asa](images/mrlearning-asa/tutorial2-section2-step1-1.png)

<span data-ttu-id="0b7ad-120">Führen Sie die gleichen Schritte wie in den Anleitungen zum [Konfigurieren der Schaltflächen zum Betreiben der Szene](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) aus dem vorhergehenden Tutorial aus, um die Komponente **Pressable Button Holo Lens 2 (Script)** (Drückbare Schaltfläche HoloLens 2 (Skript)) und die Komponente **Interactable (Script)** auf jeder der zwei Schaltflächen zu konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-120">Follow the same steps as in the [configuring the buttons to operate the scene](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) instructions from the previous tutorial to configure the **Pressable Button Holo Lens 2 (Script)** component and the **Interactable (Script)** component on each of the two buttons:</span></span>

* <span data-ttu-id="0b7ad-121">Weisen Sie für das **SaveAzureAnchorIdToDisk**-Objekt die AnchorModuleScript-> **SaveAzureAnchorIdToDisk ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-121">For the **SaveAzureAnchorIdToDisk** object, assign the AnchorModuleScript > **SaveAzureAnchorIdToDisk ()** function.</span></span>
* <span data-ttu-id="0b7ad-122">Weisen Sie für das **GetAzureAnchorIdFromDisk**-Objekt die AnchorModuleScript > **GetAzureAnchorIdFromDisk ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-122">For the **GetAzureAnchorIdFromDisk** object, assign the AnchorModuleScript > **GetAzureAnchorIdFromDisk ()** function.</span></span>

<span data-ttu-id="0b7ad-123">Wenn Sie die aktualisierte Anwendung für Ihre HoloLens erstellen, können Sie jetzt Azure Spatial Anchors zwischen App-Sitzungen bewahren, indem Sie die Azure Anchor ID speichern.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-123">If you build the updated application to your HoloLens, you can now persist Azure Spatial Anchors between app sessions by saving the Azure Anchor ID.</span></span> <span data-ttu-id="0b7ad-124">Um das zu Testen, können Sie diese Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-124">To test it out, you can follow these steps:</span></span>

1. <span data-ttu-id="0b7ad-125">Verschieben Sie die Raketenstartbasis-Erfahrung an den gewünschten Speicherort.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-125">Move the Rocket Launcher experience to desired location.</span></span>
2. <span data-ttu-id="0b7ad-126">Starten Sie eine Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-126">Start Azure Session.</span></span>
3. <span data-ttu-id="0b7ad-127">Erstellen Sie Azure Anchors (erstellt Anker am Speicherort der Raketenstartbasis-Benutzererfahrung).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-127">Create Azure Anchor (creates anchors at the location of the Rocket Launcher experience).</span></span>
4. <span data-ttu-id="0b7ad-128">Speichern Sie die Azure Anchor ID auf dem Datenträger.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-128">Save Azure Anchor ID to Disk.</span></span>
5. <span data-ttu-id="0b7ad-129">Führen Sie einen Neustart der Anwendung aus</span><span class="sxs-lookup"><span data-stu-id="0b7ad-129">Restart the application.</span></span>
6. <span data-ttu-id="0b7ad-130">Rufen Sie den Azure Anchor vom Datenträger ab (lädt die Anchor ID, die Sie soeben gespeichert haben).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-130">Get Azure Anchor from Disk (loads the anchor ID you just saved).</span></span>
7. <span data-ttu-id="0b7ad-131">Starten Sie eine Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-131">Start Azure Session.</span></span>
8. <span data-ttu-id="0b7ad-132">Suchen Sie nach dem Azure Anchor (er positioniert die Raketenstartbasis-Benutzererfahrung an der Position aus Schritt 3).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-132">Find Azure Anchor (positions the Rocket Launcher experience at the location from step 3).</span></span>

> [!NOTE]
> <span data-ttu-id="0b7ad-133">Für einen vollständigen Neustart der Anwendung muss nach dem Schließen der immersiven App-Ansicht das App-Fenster in der Mixed Reality Startumgebung geschlossen werden, bevor die Anwendung über das Startmenü neu gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-133">To fully restart the application, after exiting the immersive app view, the app window in the mixed reality home needs to be closed before relaunching the application from the Start menu.</span></span> <span data-ttu-id="0b7ad-134">Weitere Details finden Sie in der Dokumentation [Verwenden von Apps in HoloLens](https://docs.microsoft.com/hololens/holographic-home#using-apps-on-hololens).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-134">For additional details, you can refer to the [Using apps on HoloLens](https://docs.microsoft.com/hololens/holographic-home#using-apps-on-hololens) documentation.</span></span>

## <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="0b7ad-135">Teilen von Azure Anchors zwischen mehreren Geräten</span><span class="sxs-lookup"><span data-stu-id="0b7ad-135">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="0b7ad-136">In diesem Abschnitt erfahren Sie, wie Sie die Azure Anchor ID gemeinsam auf mehreren Geräten verwenden.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-136">In this section, you will learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="0b7ad-137">Dies ermöglicht es mehreren Geräten, die gleiche Anchor ID bei Azure abzufragen, was die räumliche Ausrichtung der verankerten Hologramme gestattet.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-137">This will allow multiple devices to query Azure for the same anchor ID, allowing the anchored holograms to be spatially aligned.</span></span> <span data-ttu-id="0b7ad-138">Die räumliche Ausrichtung, d. h. die Anzeige der gleichen Hologramme an den gleichen physischen Positionen auf mehreren Geräten, ist entscheidend für gemeinsame lokale Benutzererlebnisse in HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-138">Spatial alignment, i.e. seeing the same holograms in the same physical location between multiple devices, is key to local shared experiences in the HoloLens 2.</span></span>

<span data-ttu-id="0b7ad-139">Es gibt viele Möglichkeiten, Azure Anchor IDs zwischen Geräten zu übertragen, einschließlich der Methoden, die in den Reihen der [Tutorials zu Mehrbenutzerfunktionen](mrlearning-sharing(photon)-ch1.md) beschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-139">There are many ways to transfer Azure Anchor IDs between devices, including methods outlined in the the [Multi-user capabilities tutorials](mrlearning-sharing(photon)-ch1.md) series.</span></span> <span data-ttu-id="0b7ad-140">In diesem Beispiel verwenden Sie einen einfachen Webdienst zum Hochladen und Herunterladen von Anchor IDs zwischen Geräten.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-140">In this example, you will use a simple web service to upload and download anchor IDs between devices.</span></span>

<span data-ttu-id="0b7ad-141">Klappen Sie im Hierarchiefenster das **ButtonParent_ShareAnchorId**-Objekt auf, das zwei Schaltflächen enthält, eine Schaltfläche zum Hochladen der Azure Anchor ID auf den Webserver und eine weitere zum Herunterladen der ID vom Webserver:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-141">In the Hierarchy window, expand the **ButtonParent_ShareAnchorId** object which contains two buttons; one button for uploading the Azure Anchor ID to the web server, and another for downloading the ID from the web server:</span></span>

![mrlearning-asa](images/mrlearning-asa/tutorial2-section3-step1-1.png)

<span data-ttu-id="0b7ad-143">Führen Sie die gleichen Schritte wie in den Anleitungen zum [Konfigurieren der Schaltflächen zum Betreiben der Szene](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) aus dem vorhergehenden Tutorial aus, um die Komponente **Pressable Button Holo Lens 2 (Script)** (Drückbare Schaltfläche HoloLens 2 (Skript)) und die Komponente **Interactable (Script)** auf jeder der zwei Schaltflächen zu konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-143">Follow the same steps as in the [configuring the buttons to operate the scene](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) instructions from the previous tutorial to configure the **Pressable Button Holo Lens 2 (Script)** component and the **Interactable (Script)** component on each of the two buttons:</span></span>

* <span data-ttu-id="0b7ad-144">Weisen Sie dem **ShareAzureAnchorIdToNetwork** Objekt die AnchorModuleScript-> **ShareAzureAnchorIdToNetwork ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-144">For the **ShareAzureAnchorIdToNetwork** object, assign the AnchorModuleScript > **ShareAzureAnchorIdToNetwork ()** function.</span></span>
* <span data-ttu-id="0b7ad-145">Weisen Sie dem **GetAzureAnchorIdFromNetwork**-Objekt die AnchorModuleScript > **GetAzureAnchorIdFromNetwork ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-145">For the **GetAzureAnchorIdFromNetwork** object, assign the AnchorModuleScript > **GetAzureAnchorIdFromNetwork ()** function.</span></span>

<span data-ttu-id="0b7ad-146">Wenn Sie die aktualisierte Anwendung auf zwei HoloLens-Geräten erstellen, können Sie jetzt eine räumliche Ausrichtung zwischen den Geräten erzielen, indem Sie die Azure Anchor ID freigeben.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-146">If you build the updated application to two HoloLens devices, you can now achieve spatial alignment between them by sharing the Azure Anchor ID.</span></span> <span data-ttu-id="0b7ad-147">Um das zu Testen, können Sie diese Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="0b7ad-147">To test it out, you can follow these steps:</span></span>

1. <span data-ttu-id="0b7ad-148">Auf HoloLens-Gerät 1: Verschieben Sie die Raketenstartbasis-Erfahrung an den gewünschten Speicherort.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-148">On HoloLens device 1: Move the Rocket Launcher experience to desired location.</span></span>
2. <span data-ttu-id="0b7ad-149">Auf HoloLens-Gerät 1: Starten Sie eine Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-149">On HoloLens device 1: Start Azure Session.</span></span>
3. <span data-ttu-id="0b7ad-150">Auf HoloLens-Gerät 1: Erstellen Sie Azure Anchors (erstellt Anker am Speicherort der Raketenstartbasis-Benutzererfahrung).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-150">On HoloLens device 1: Create Azure Anchor (creates anchors at the location of the Rocket Launcher experience).</span></span>
4. <span data-ttu-id="0b7ad-151">Auf HoloLens-Gerät 1: Geben Sie die Azure Anchor ID im Netzwerk frei.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-151">On HoloLens device 1: Share Azure Anchor ID to Network.</span></span>
5. <span data-ttu-id="0b7ad-152">Auf HoloLens-Gerät 2: Starten Sie die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-152">On HoloLens device 2: Start the application.</span></span>
6. <span data-ttu-id="0b7ad-153">Auf HoloLens-Gerät 2: Rufen Sie die Shared Anchor ID aus dem Netzwerk ab (ruft die Anchor ID ab, die gerade von HoloLens-Gerät 1 freigegeben worden war).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-153">On HoloLens device 2: Get Shared Anchor ID from Network (fetches the anchor ID just shared from HoloLens device 1).</span></span>
7. <span data-ttu-id="0b7ad-154">Auf HoloLens-Gerät 2: Starten Sie eine Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-154">On HoloLens device 2: Start Azure Session.</span></span>
8. <span data-ttu-id="0b7ad-155">Auf HoloLens-Gerät 2: Suchen Sie nach dem Azure Anchor (er positioniert die Raketenstartbasis-Benutzererfahrung an der Position aus Schritt 3).</span><span class="sxs-lookup"><span data-stu-id="0b7ad-155">On HoloLens device 2: Find Azure Anchor (positions the Rocket Launcher experience at the location from step 3).</span></span>

> [!TIP]
> <span data-ttu-id="0b7ad-156">Wenn Sie nur über ein HoloLens-Gerät verfügen, können Sie die Funktionalität trotzdem testen, indem Sie die Anwendung neu starten, statt ein zweites HoloLens-Gerät zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-156">If you only have one HoloLens, you can still test the functionality by restarting the application instead of using a second HoloLens device.</span></span>

## <a name="congratulations"></a><span data-ttu-id="0b7ad-157">Herzlichen Glückwunsch!</span><span class="sxs-lookup"><span data-stu-id="0b7ad-157">Congratulations</span></span>

<span data-ttu-id="0b7ad-158">In diesem Tutorial haben Sie erfahren, wie Sie Azure Spatial Anchors zwischen Anwendungssitzungen und über Anwendungsneustarts hinweg beibehalten, indem Sie die Azure Spatial Anchor ID auf dem lokalen Datenträger auf HoloLens speichern.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-158">In this tutorial you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens.</span></span> <span data-ttu-id="0b7ad-159">Sie haben darüber hinaus gelernt, wie Azure Spatial Anchors zwischen mehreren Geräten geteilt werden, um eine einfache geteilte Mehrbenutzererfahrung mit statischen Hologrammen zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-159">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="0b7ad-160">Im nächsten Tutorial erfahren Sie, wie Sie für Benutzer Feedback in Echtzeit bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-160">In the next tutorial you will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="0b7ad-161">Dieses Feedback enthält Informationen zur Ankererstellung, zur Qualität des Verstehens der Umgebung und zum Status der Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-161">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="0b7ad-162">Ohne Feedback wissen Benutzer möglicherweise nicht, ob ein Anker erfolgreich zu Azure hochgeladen wurde, ob die Qualität der Umgebung für die Ankererstellung ausreicht und wie der aktuelle Zustand ist.</span><span class="sxs-lookup"><span data-stu-id="0b7ad-162">Without feedback, users may not know whether an anchor has successfully been uploaded to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="0b7ad-163">Nächste Lektion: 3. Anzeigen von Azure Spatial Anchors-Feedback</span><span class="sxs-lookup"><span data-stu-id="0b7ad-163">Next Lesson: 3. Displaying Azure Spatial Anchor feedback</span></span>](mrlearning-asa-ch3.md)
