---
title: Freigeben von 250 - HoloLens und immersive Headsets MR
description: Führen Sie diese exemplarische Vorgehensweise mit Unity, Visual Studio, HoloLens und Windows Mixed Reality-Headsets für die Details der Freigabe Hologramme zwischen mixed Reality-Geräte zu programmieren.
author: keveleigh
ms.author: kurtie
ms.date: 03/21/2018
ms.topic: article
keywords: Holotoolkit, Mixedrealitytoolkit, Mixedrealitytoolkit-Unity, immersive motion, Controller, Freigabe, Xbox-Controller, Netzwerke, Geräteübergreifende
ms.openlocfilehash: 9e1cb0d168b8bf830b4477190516cd19caef7972
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/12/2019
ms.locfileid: "59593444"
---
>[!NOTE]
><span data-ttu-id="21422-104">In den Tutorials Mixed Reality Academy mit HoloLens entwickelt wurden (der 1. Generation) und Mixed Reality Immersive Headsets Bedenken.</span><span class="sxs-lookup"><span data-stu-id="21422-104">The Mixed Reality Academy tutorials were designed with HoloLens (1st gen) and Mixed Reality Immersive Headsets in mind.</span></span>  <span data-ttu-id="21422-105">Daher können wir, dass es ist wichtig, die in diesen Tutorials für Entwickler beizubehalten, die Informationen bei der Entwicklung für diese Geräte benötigen werden.</span><span class="sxs-lookup"><span data-stu-id="21422-105">As such, we feel it is important to leave these tutorials in place for developers who are still looking for guidance in developing for those devices.</span></span>  <span data-ttu-id="21422-106">In diesen Tutorials werden **_nicht_** aktualisiert werden, mit der neuesten Toolsets oder Interaktionen für HoloLens 2 verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="21422-106">These tutorials will **_not_** be updated with the latest toolsets or interactions being used for HoloLens 2.</span></span>  <span data-ttu-id="21422-107">Sie werden zum Fortsetzen der Arbeit auf die unterstützten Geräte verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="21422-107">They will be maintained to continue working on the supported devices.</span></span> <span data-ttu-id="21422-108">Es wird eine neue Reihe von Tutorials, die in der Zukunft ausgegeben wird, die Entwicklung für HoloLens 2 veranschaulichen vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="21422-108">There will be a new series of tutorials that will be posted in the future that will demonstrate how to develop for HoloLens 2.</span></span>  <span data-ttu-id="21422-109">Dieser Hinweis wird mit einem Link zu dieser Tutorials aktualisiert werden, wenn sie bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="21422-109">This notice will be updated with a link to those tutorials when they are posted.</span></span>

<br>

# <a name="mr-sharing-250-hololens-and-immersive-headsets"></a><span data-ttu-id="21422-110">MR 250 freigeben: HoloLens und immersive headsets</span><span class="sxs-lookup"><span data-stu-id="21422-110">MR Sharing 250: HoloLens and immersive headsets</span></span>

<span data-ttu-id="21422-111">Mit der Flexibilität der universellen Windows-Plattform (UWP) ist es einfach, eine Anwendung erstellen, die mehrere Geräte umfasst.</span><span class="sxs-lookup"><span data-stu-id="21422-111">With the flexibility of Universal Windows Platform (UWP), it is easy to create an application that spans multiple devices.</span></span> <span data-ttu-id="21422-112">Durch diese Flexibilität können wir Umgebungen schaffen, die die Stärken der einzelnen Geräte nutzen.</span><span class="sxs-lookup"><span data-stu-id="21422-112">With this flexibility, we can create experiences that leverage the strengths of each device.</span></span> <span data-ttu-id="21422-113">In diesem Tutorial werden Grundkenntnisse in einem freigegebenen behandelt, die sowohl HoloLens und Windows Mixed Reality immersive Headsets ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="21422-113">This tutorial will cover a basic shared experience that runs on both HoloLens and Windows Mixed Reality immersive headsets.</span></span> <span data-ttu-id="21422-114">Dieser Inhalt wurde ursprünglich auf der Microsoft Build 2017-Konferenz in Seattle, WA, USA gesendet.</span><span class="sxs-lookup"><span data-stu-id="21422-114">This content was originally delivered at the Microsoft Build 2017 conference in Seattle, WA.</span></span>

<span data-ttu-id="21422-115">**In diesem Tutorial wird Folgendes beschrieben:**</span><span class="sxs-lookup"><span data-stu-id="21422-115">**In this tutorial, we will:**</span></span>

* <span data-ttu-id="21422-116">Einrichten eines Netzwerks mit UNET an.</span><span class="sxs-lookup"><span data-stu-id="21422-116">Setup a network using UNET.</span></span>
* <span data-ttu-id="21422-117">Teilen Sie Hologramme in mixed Reality-Geräte.</span><span class="sxs-lookup"><span data-stu-id="21422-117">Share holograms across mixed reality devices.</span></span>
* <span data-ttu-id="21422-118">Richten Sie eine andere Ansicht der Anwendung, je nachdem, welche mixed Reality-Gerät verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="21422-118">Establish a different view of the application depending on which mixed reality device is being used.</span></span>
* <span data-ttu-id="21422-119">Erstellen Sie eine freigegebene Umgebung, in denen Benutzer mit HoloLens immersive Headsets durch einige einfache Rätsel Benutzerhandbuch.</span><span class="sxs-lookup"><span data-stu-id="21422-119">Create a shared experience where HoloLens users guide immersive headsets users through some simple puzzles.</span></span>

## <a name="device-support"></a><span data-ttu-id="21422-120">Unterstützung von Geräten</span><span class="sxs-lookup"><span data-stu-id="21422-120">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="21422-121">Kurs</span><span class="sxs-lookup"><span data-stu-id="21422-121">Course</span></span></th><th style="width:150px"> <span data-ttu-id="21422-122"><a href="hololens-hardware-details.md">HoloLens</a></span><span class="sxs-lookup"><span data-stu-id="21422-122"><a href="hololens-hardware-details.md">HoloLens</a></span></span></th><th style="width:150px"> <span data-ttu-id="21422-123"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span><span class="sxs-lookup"><span data-stu-id="21422-123"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td><span data-ttu-id="21422-124">MR 250 freigeben: HoloLens und immersive headsets</span><span class="sxs-lookup"><span data-stu-id="21422-124">MR Sharing 250: HoloLens and immersive headsets</span></span></td><td style="text-align: center;"> <span data-ttu-id="21422-125">✔️</span><span class="sxs-lookup"><span data-stu-id="21422-125">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="21422-126">✔️</span><span class="sxs-lookup"><span data-stu-id="21422-126">✔️</span></span></td>
</tr>
</table>

## <a name="before-you-start"></a><span data-ttu-id="21422-127">Bevor Sie beginnen</span><span class="sxs-lookup"><span data-stu-id="21422-127">Before you start</span></span>

### <a name="prerequisites"></a><span data-ttu-id="21422-128">Vorraussetzungen</span><span class="sxs-lookup"><span data-stu-id="21422-128">Prerequisites</span></span>

* <span data-ttu-id="21422-129">Ein Windows 10-PCs mit dem [erforderlichen Entwicklungstools](install-the-tools.md) und [so konfiguriert, dass eine immersive Windows Mixed Reality-Kopfhörer unterstützen](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span><span class="sxs-lookup"><span data-stu-id="21422-129">A Windows 10 PC with the [necessary development tools](install-the-tools.md) and [configured to support a Windows Mixed Reality immersive headset](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>
* <span data-ttu-id="21422-130">Ein Xbox-Controller, die mit Ihrem PC.</span><span class="sxs-lookup"><span data-stu-id="21422-130">An Xbox controller that works with your PC.</span></span>
* <span data-ttu-id="21422-131">Mindestens ein HoloLens-Gerät und eine immersive Kopfhörer.</span><span class="sxs-lookup"><span data-stu-id="21422-131">At least one HoloLens device and one immersive headset.</span></span>
* <span data-ttu-id="21422-132">Ein Netzwerk, das UDP-Broadcast für die Ermittlung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="21422-132">A network which allows UDP Broadcast for discovery.</span></span>

### <a name="project-files"></a><span data-ttu-id="21422-133">Projektdateien</span><span class="sxs-lookup"><span data-stu-id="21422-133">Project files</span></span>

* <span data-ttu-id="21422-134">Herunterladen der [Dateien](https://github.com/Microsoft/MixedReality250/archive/master.zip) vom Projekt erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="21422-134">Download the [files](https://github.com/Microsoft/MixedReality250/archive/master.zip) required by the project.</span></span> <span data-ttu-id="21422-135">Extrahieren Sie die Dateien in einem leicht zu merken Speicherort.</span><span class="sxs-lookup"><span data-stu-id="21422-135">Extract the files to an easy to remember location.</span></span>
* <span data-ttu-id="21422-136">Dieses Projekt erfordert die [eine empfohlene Version von Unity mit Unterstützung für Windows Mixed Reality](install-the-tools.md).</span><span class="sxs-lookup"><span data-stu-id="21422-136">This project requires the [a recommended version of Unity with Windows Mixed Reality support](install-the-tools.md).</span></span>

>[!NOTE]
><span data-ttu-id="21422-137">Wenn Sie vor dem Herunterladen, den Quellcode ansehen möchten es [auf GitHub verfügbar](https://github.com/Microsoft/MixedReality250).</span><span class="sxs-lookup"><span data-stu-id="21422-137">If you want to look through the source code before downloading, it's [available on GitHub](https://github.com/Microsoft/MixedReality250).</span></span>

## <a name="chapter-1---holo-world"></a><span data-ttu-id="21422-138">Kapitel 1: Holo World</span><span class="sxs-lookup"><span data-stu-id="21422-138">Chapter 1 - Holo World</span></span>

>[!VIDEO https://www.youtube.com/embed/IC0rp6rLiEc]

### <a name="objectives"></a><span data-ttu-id="21422-139">Ziele</span><span class="sxs-lookup"><span data-stu-id="21422-139">Objectives</span></span>

<span data-ttu-id="21422-140">Stellen Sie sicher, dass die Entwicklungsumgebung mit einem einfachen Projekt wechseln kann.</span><span class="sxs-lookup"><span data-stu-id="21422-140">Make sure the development environment is ready to go with a simple project.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="21422-141">Was wir erstellen</span><span class="sxs-lookup"><span data-stu-id="21422-141">What we will build</span></span>

<span data-ttu-id="21422-142">Eine Anwendung, die ggf. ein Hologramm für HoloLens oder eine immersive Windows Mixed Reality-Kopfhörer anzeigt.</span><span class="sxs-lookup"><span data-stu-id="21422-142">An application that shows a hologram on either HoloLens or a Windows Mixed Reality immersive headset.</span></span>

### <a name="steps"></a><span data-ttu-id="21422-143">Schritte</span><span class="sxs-lookup"><span data-stu-id="21422-143">Steps</span></span>
* <span data-ttu-id="21422-144">Öffnen von Unity.</span><span class="sxs-lookup"><span data-stu-id="21422-144">Open Unity.</span></span>
    * <span data-ttu-id="21422-145">Wählen Sie **öffnen**.</span><span class="sxs-lookup"><span data-stu-id="21422-145">Select **Open**.</span></span>
    * <span data-ttu-id="21422-146">Navigieren Sie zu, in dem Sie die Projektdateien extrahiert haben.</span><span class="sxs-lookup"><span data-stu-id="21422-146">Navigate to where you extracted the project files.</span></span>
    * <span data-ttu-id="21422-147">Klicken Sie auf **Ordner auswählen**.</span><span class="sxs-lookup"><span data-stu-id="21422-147">Click **Select Folder**.</span></span>
    * <span data-ttu-id="21422-148">*Es dauert ein wenig während für Unity, um das Projekt erstmals zu verarbeiten.*</span><span class="sxs-lookup"><span data-stu-id="21422-148">*It will take a little while for Unity to process the project the first time.*</span></span>
* <span data-ttu-id="21422-149">Überprüfen Sie die Mixed Reality in Unity aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="21422-149">Check that Mixed Reality is enabled in Unity.</span></span>
    * <span data-ttu-id="21422-150">Öffnen Sie das Build-Dialogfeld "Settings" (**STRG + UMSCHALT + B** oder **Datei > Buildeinstellungen...** ).</span><span class="sxs-lookup"><span data-stu-id="21422-150">Open the build settings dialog (**Control+Shift+B** or **File > Build Settings...**).</span></span>
    * <span data-ttu-id="21422-151">Wählen Sie **universelle Windows-Plattform** klicken Sie dann auf **Plattform wechseln**.</span><span class="sxs-lookup"><span data-stu-id="21422-151">Select **Universal Windows Platform** then click **Switch Platform**.</span></span>
    * <span data-ttu-id="21422-152">Wählen Sie **Bearbeiten > Playereinstellungen**.</span><span class="sxs-lookup"><span data-stu-id="21422-152">Select **Edit>Player Settings**.</span></span>
    * <span data-ttu-id="21422-153">In der **Inspektor** auf der rechten Seite im Bereich, erweitern Sie **XR-Einstellungen**.</span><span class="sxs-lookup"><span data-stu-id="21422-153">In the **Inspector** panel on the right hand side, expand **XR Settings**.</span></span>
    * <span data-ttu-id="21422-154">Überprüfen Sie die **virtuelle Realität unterstützt** Feld.</span><span class="sxs-lookup"><span data-stu-id="21422-154">Check the **Virtual Reality Supported** box.</span></span>
    * <span data-ttu-id="21422-155">*Windows Mixed Reality sollte die Virtual Reality-SDK.*</span><span class="sxs-lookup"><span data-stu-id="21422-155">*Windows Mixed Reality should be the Virtual Reality SDK.*</span></span>
* <span data-ttu-id="21422-156">Erstellen einer Szene an.</span><span class="sxs-lookup"><span data-stu-id="21422-156">Create a scene.</span></span>
    * <span data-ttu-id="21422-157">In der **Hierarchie** klicken Sie mit der rechten Maustaste auf **Main Camera** wählen **löschen**.</span><span class="sxs-lookup"><span data-stu-id="21422-157">In the **Hierarchy** right click **Main Camera** select **Delete**.</span></span>
    * <span data-ttu-id="21422-158">Von **HoloToolkit > Eingabe > Prefabs** ziehen **MixedRealityCameraParent** auf die **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-158">From **HoloToolkit > Input > Prefabs** drag **MixedRealityCameraParent** to the **Hierarchy**.</span></span>
* <span data-ttu-id="21422-159">Fügen Sie in die Szene Hologramme</span><span class="sxs-lookup"><span data-stu-id="21422-159">Add Holograms to the scene</span></span>
    * <span data-ttu-id="21422-160">Von **AppPrefabs** ziehen **Skybox** auf die **Szenenansicht**.</span><span class="sxs-lookup"><span data-stu-id="21422-160">From **AppPrefabs** drag **Skybox** to the **Scene View**.</span></span>
    * <span data-ttu-id="21422-161">Von **AppPrefabs** ziehen **Managern** auf die **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-161">From **AppPrefabs** drag **Managers** to the **Hierarchy**.</span></span>
    * <span data-ttu-id="21422-162">Von **AppPrefabs** ziehen **Insel** auf die **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-162">From **AppPrefabs** drag **Island** to the **Hierarchy**.</span></span>
* <span data-ttu-id="21422-163">Speichern und erstellen</span><span class="sxs-lookup"><span data-stu-id="21422-163">Save And build</span></span>
    * <span data-ttu-id="21422-164">Speichern (entweder **STRG + S +** oder **Datei > Szene speichern**)</span><span class="sxs-lookup"><span data-stu-id="21422-164">Save (either **Control+S** or **File > Save Scene**)</span></span>
    * <span data-ttu-id="21422-165">Da es sich um eine neue Szene handelt, müssen Sie es nennen.</span><span class="sxs-lookup"><span data-stu-id="21422-165">Since this is a new scene, you'll need to name it.</span></span> <span data-ttu-id="21422-166">Name spielt keine Rolle, aber wir SharedMixedReality verwenden.</span><span class="sxs-lookup"><span data-stu-id="21422-166">Name doesn't matter, but we use SharedMixedReality.</span></span>
* <span data-ttu-id="21422-167">Exportieren Sie in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="21422-167">Export To Visual Studio</span></span>
    * <span data-ttu-id="21422-168">Öffnen Sie im Menü erstellen (**STRG + UMSCHALT + B** oder **Datei > Buildeinstellungen**)</span><span class="sxs-lookup"><span data-stu-id="21422-168">Open the build menu (**Control+Shift+B** or **File > Build Settings**)</span></span>
    * <span data-ttu-id="21422-169">Klicken Sie auf **öffnende Szenen hinzufügen.**</span><span class="sxs-lookup"><span data-stu-id="21422-169">Click **Add Open Scenes.**</span></span>
    * <span data-ttu-id="21422-170">Überprüfen Sie **Unity C# Projekte**</span><span class="sxs-lookup"><span data-stu-id="21422-170">Check **Unity C# Projects**</span></span>
    * <span data-ttu-id="21422-171">Klicken Sie auf **Erstellen**.</span><span class="sxs-lookup"><span data-stu-id="21422-171">Click **Build**.</span></span>
    * <span data-ttu-id="21422-172">In dem Datei-Explorer-Fenster, das angezeigt wird, erstellen Sie einen neuen Ordner namens **App**.</span><span class="sxs-lookup"><span data-stu-id="21422-172">In the file explorer window that appears, create a New Folder named **App**.</span></span>
    * <span data-ttu-id="21422-173">Mausklick die **App** Ordner.</span><span class="sxs-lookup"><span data-stu-id="21422-173">Single click the **App** folder.</span></span>
    * <span data-ttu-id="21422-174">Drücken Sie **Ordner auswählen.**</span><span class="sxs-lookup"><span data-stu-id="21422-174">Press **Select Folder.**</span></span>
    * <span data-ttu-id="21422-175">**Warten Sie, bis der Buildvorgang abgeschlossen**</span><span class="sxs-lookup"><span data-stu-id="21422-175">**Wait for the build to complete**</span></span>
    * <span data-ttu-id="21422-176">Navigieren Sie in dem Datei-Explorer-Fenster, das angezeigt wird, in der **App** Ordner.</span><span class="sxs-lookup"><span data-stu-id="21422-176">In the file explorer window that appears, navigate into the **App** folder.</span></span>
    * <span data-ttu-id="21422-177">Doppelklicken Sie auf **SharedMixedReality.sln** zum Starten von Visual Studio</span><span class="sxs-lookup"><span data-stu-id="21422-177">Double-click **SharedMixedReality.sln** to launch Visual Studio</span></span>
* <span data-ttu-id="21422-178">Erstellen Sie in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="21422-178">Build From Visual Studio</span></span>
    * <span data-ttu-id="21422-179">Verwenden obere auf der Symbolleiste ändern, **Version** und **X86**.</span><span class="sxs-lookup"><span data-stu-id="21422-179">Using the top toolbar change target to **Release** and **x86**.</span></span>
    * <span data-ttu-id="21422-180">Klicken Sie auf den Pfeil neben **lokalen Computer** , und wählen Sie **Gerät** für HoloLens bereitstellen</span><span class="sxs-lookup"><span data-stu-id="21422-180">Click the arrow next to **Local Machine** and select **Device** to deploy to HoloLens</span></span>
    * <span data-ttu-id="21422-181">Klicken Sie auf den Pfeil neben **Gerät** , und wählen Sie **lokalen Computer** für das mixed Reality-Kopfhörer bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="21422-181">Click the arrow next to **Device** and select **Local Machine** to deploy for the mixed reality headset.</span></span>
    * <span data-ttu-id="21422-182">Klicken Sie auf **Debuggen -> Starten ohne Debugging** oder **STRG + F5** zum Starten der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="21422-182">Click **Debug->Start Without Debugging** or **Control+F5** to start the application.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="21422-183">Detaillierte Untersuchung des Codes</span><span class="sxs-lookup"><span data-stu-id="21422-183">Digging into the code</span></span>

<span data-ttu-id="21422-184">Navigieren Sie im Projektpanel zu **Assets\HoloToolkit\Input\Scripts\Utilities** und doppelklicken Sie auf **MixedRealityCameraManager.cs** um ihn zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="21422-184">In the project panel, navigate to **Assets\HoloToolkit\Input\Scripts\Utilities** and double click **MixedRealityCameraManager.cs** to open it.</span></span>

<span data-ttu-id="21422-185">**Übersicht:** MixedRealityCameraManager.cs ist ein einfaches Skript, das Qualität-Ebene und Hintergrund Einstellungen basierend auf dem Gerät anpasst.</span><span class="sxs-lookup"><span data-stu-id="21422-185">**Overview:** MixedRealityCameraManager.cs is a simple script that adjusts quality level and background settings based on the device.</span></span> <span data-ttu-id="21422-186">Wesentliche Idee hier besteht HolographicSettings.IsDisplayOpaque, dadurch kann ein Skript, um festzustellen, ob das Gerät eine HoloLens ist (IsDisplayOpaque gibt "false" zurück) oder eine immersive Kopfhörer (IsDisplayOpaque gibt "true" zurück).</span><span class="sxs-lookup"><span data-stu-id="21422-186">Key here is HolographicSettings.IsDisplayOpaque, which allows a script to detect if the device is a HoloLens (IsDisplayOpaque returns false) or an immersive headset (IsDisplayOpaque returns true).</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="21422-187">Nutzen Sie Ihre Arbeit</span><span class="sxs-lookup"><span data-stu-id="21422-187">Enjoy your progress</span></span>

<span data-ttu-id="21422-188">An diesem Punkt wird die Anwendung nur ggf. ein Hologramm gerendert.</span><span class="sxs-lookup"><span data-stu-id="21422-188">At this point the application will just render a hologram.</span></span> <span data-ttu-id="21422-189">Wir werden die Hologramm Interaktion später hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="21422-189">We will add interaction to the hologram later.</span></span> <span data-ttu-id="21422-190">Sowohl für Geräte rendert der Hologramm gleich.</span><span class="sxs-lookup"><span data-stu-id="21422-190">Both devices will render the hologram the same.</span></span> <span data-ttu-id="21422-191">Die immersive Kopfhörer wird auch mit einen blauen Himmel und Clouds Hintergrund gerendert.</span><span class="sxs-lookup"><span data-stu-id="21422-191">The immersive headset will also render a blue sky and clouds background.</span></span>

## <a name="chapter-2---interaction"></a><span data-ttu-id="21422-192">Kapitel 2 – Interaktionen</span><span class="sxs-lookup"><span data-stu-id="21422-192">Chapter 2 - Interaction</span></span>

>[!VIDEO https://www.youtube.com/embed/Lrb1y4sQRvI]

### <a name="objectives"></a><span data-ttu-id="21422-193">Ziele</span><span class="sxs-lookup"><span data-stu-id="21422-193">Objectives</span></span>

<span data-ttu-id="21422-194">Veranschaulicht das Verarbeiten der Eingabe für eine Windows Mixed Reality-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="21422-194">Show how to handle input for a Windows Mixed Reality application.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="21422-195">Was wir erstellen</span><span class="sxs-lookup"><span data-stu-id="21422-195">What we will build</span></span>

<span data-ttu-id="21422-196">Erstellen für die Anwendung aus Kapitel 1, werden wir Funktionen ermöglichen den Benutzer, die – Hologramm übernehmen, und platzieren Sie es auf einer Oberfläche der realen Welt in HoloLens oder auf eine virtuelle Tabelle in eine immersive Kopfhörer hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="21422-196">Building on the application from chapter 1, we will add functionality to allow the user to pick up the hologram and place it on a real world surface in HoloLens or on a virtual table in an immersive headset.</span></span>

<span data-ttu-id="21422-197">**Aktualisierungsprogramm für Eingabe:** Für HoloLens die select-Aktion ist die **tippbewegung**.</span><span class="sxs-lookup"><span data-stu-id="21422-197">**Input Refresher:** On HoloLens the select gesture is the **air tap**.</span></span> <span data-ttu-id="21422-198">Für immersive Headsets, verwenden wir die **ein** Schaltfläche auf der Xbox-Controller.</span><span class="sxs-lookup"><span data-stu-id="21422-198">On immersive headsets, we will use the **A** button on the Xbox controller.</span></span> <span data-ttu-id="21422-199">Weitere Informationen zu Eingabe [beginnen Sie hier](gestures.md).</span><span class="sxs-lookup"><span data-stu-id="21422-199">For more information on input [start here](gestures.md).</span></span>

### <a name="steps"></a><span data-ttu-id="21422-200">Schritte</span><span class="sxs-lookup"><span data-stu-id="21422-200">Steps</span></span>
* <span data-ttu-id="21422-201">Eingabe-Manager hinzufügen</span><span class="sxs-lookup"><span data-stu-id="21422-201">Add Input manager</span></span>
    * <span data-ttu-id="21422-202">Aus **HoloToolkit > Eingabe > Prefabs** ziehen **InputManager** zu **Hierarchie** als untergeordnetes Element des **Managern**.</span><span class="sxs-lookup"><span data-stu-id="21422-202">From **HoloToolkit > Input > Prefabs** drag **InputManager** to **Hierarchy** as a child of **Managers**.</span></span>
    * <span data-ttu-id="21422-203">Von **HoloToolkit > Eingabe > Prefabs > Cursor** ziehen **Cursor** zu **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-203">From **HoloToolkit > Input > Prefabs > Cursor** drag **Cursor** to **Hierarchy**.</span></span>
* <span data-ttu-id="21422-204">Räumliche Zuordnung hinzufügen</span><span class="sxs-lookup"><span data-stu-id="21422-204">Add Spatial Mapping</span></span>
    * <span data-ttu-id="21422-205">Von **HoloToolkit > SpatialMapping > Prefabs** ziehen **SpatialMapping** zu **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-205">From **HoloToolkit > SpatialMapping > Prefabs** drag **SpatialMapping** to **Hierarchy**.</span></span>
* <span data-ttu-id="21422-206">Hinzufügen von virtuellen Playspace</span><span class="sxs-lookup"><span data-stu-id="21422-206">Add Virtual Playspace</span></span>
    * <span data-ttu-id="21422-207">In **Hierarchie** erweitern **MixedRealityCameraParent** wählen **Grenze**</span><span class="sxs-lookup"><span data-stu-id="21422-207">In **Hierarchy** expand **MixedRealityCameraParent** select **Boundary**</span></span>
    * <span data-ttu-id="21422-208">In **Inspektor** Bereich aktivieren, aktivieren Sie das Kontrollkästchen **Grenze**</span><span class="sxs-lookup"><span data-stu-id="21422-208">In **Inspector** panel check the box to enable **Boundary**</span></span>
    * <span data-ttu-id="21422-209">Von **AppPrefabs** ziehen **VRRoom** zu **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-209">From **AppPrefabs** drag **VRRoom** to **Hierarchy**.</span></span>
* <span data-ttu-id="21422-210">Add WorldAnchorManager</span><span class="sxs-lookup"><span data-stu-id="21422-210">Add WorldAnchorManager</span></span>
    * <span data-ttu-id="21422-211">In **Hierarchie**Option **Managern**.</span><span class="sxs-lookup"><span data-stu-id="21422-211">In **Hierarchy**, Select **Managers**.</span></span>
    * <span data-ttu-id="21422-212">In **Inspektor**, klicken Sie auf **Add Component**.</span><span class="sxs-lookup"><span data-stu-id="21422-212">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="21422-213">Typ **Welt Anker Manager**.</span><span class="sxs-lookup"><span data-stu-id="21422-213">Type **World Anchor Manager**.</span></span>
    * <span data-ttu-id="21422-214">Wählen Sie **Welt Anker Manager** hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="21422-214">Select **World Anchor Manager** to add it.</span></span>
* <span data-ttu-id="21422-215">Fügen Sie auf der ganzen Insel TapToPlace</span><span class="sxs-lookup"><span data-stu-id="21422-215">Add TapToPlace to the Island</span></span>
    * <span data-ttu-id="21422-216">In **Hierarchie**, erweitern Sie **Insel**.</span><span class="sxs-lookup"><span data-stu-id="21422-216">In **Hierarchy**, expand **Island**.</span></span>
    * <span data-ttu-id="21422-217">Wählen Sie **MixedRealityLand**.</span><span class="sxs-lookup"><span data-stu-id="21422-217">Select **MixedRealityLand**.</span></span>
    * <span data-ttu-id="21422-218">In **Inspektor**, klicken Sie auf **Add Component**.</span><span class="sxs-lookup"><span data-stu-id="21422-218">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="21422-219">Typ **tippen zu Ort** und wählen Sie ihn.</span><span class="sxs-lookup"><span data-stu-id="21422-219">Type **Tap To Place** and select it.</span></span>
    * <span data-ttu-id="21422-220">Überprüfen Sie **Platzieren von übergeordneten auf Tap**.</span><span class="sxs-lookup"><span data-stu-id="21422-220">Check **Place Parent On Tap**.</span></span>
    * <span data-ttu-id="21422-221">Legen Sie **Platzierung Offset** zu **("0", "0,1", "0")**.</span><span class="sxs-lookup"><span data-stu-id="21422-221">Set **Placement Offset** to **(0, 0.1, 0)**.</span></span>
* <span data-ttu-id="21422-222">Speichern Sie und erstellen Sie wie zuvor</span><span class="sxs-lookup"><span data-stu-id="21422-222">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="21422-223">Detaillierte Untersuchung des Codes</span><span class="sxs-lookup"><span data-stu-id="21422-223">Digging into the code</span></span>

<span data-ttu-id="21422-224">**Script 1 - GamepadInput.cs**</span><span class="sxs-lookup"><span data-stu-id="21422-224">**Script 1 - GamepadInput.cs**</span></span>

<span data-ttu-id="21422-225">Navigieren Sie im Projektpanel zu **Assets\HoloToolkit\Input\Scripts\InputSources** und doppelklicken Sie auf **GamepadInput.cs** um ihn zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="21422-225">In the project panel navigate to **Assets\HoloToolkit\Input\Scripts\InputSources** and double click **GamepadInput.cs** to open it.</span></span> <span data-ttu-id="21422-226">Aus dem gleichen Pfad im Projektfenster auch doppelklicken **InteractionSourceInputSource.cs**.</span><span class="sxs-lookup"><span data-stu-id="21422-226">From the same path in the project panel, also double click **InteractionSourceInputSource.cs**.</span></span>

<span data-ttu-id="21422-227">Beachten Sie, dass beide Skripts eine allgemeine Basisklasse BaseInputSource.</span><span class="sxs-lookup"><span data-stu-id="21422-227">Note that both scripts have a common base class, BaseInputSource.</span></span>

<span data-ttu-id="21422-228">BaseInputSource behält einen Verweis auf ein InputManager, die ein Skript zum Auslösen von Ereignissen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="21422-228">BaseInputSource keeps a reference to an InputManager, which allows a script to trigger events.</span></span> <span data-ttu-id="21422-229">In diesem Fall ist das Ereignis InputClicked relevant.</span><span class="sxs-lookup"><span data-stu-id="21422-229">In this case, the InputClicked event is relevant.</span></span> <span data-ttu-id="21422-230">Dies ist wichtig zu beachten, wenn wir zum Skript 2 TapToPlace erhalten wird.</span><span class="sxs-lookup"><span data-stu-id="21422-230">This will be important to remember when we get to script 2, TapToPlace.</span></span> <span data-ttu-id="21422-231">Im Fall von GamePadInput wir Abfragen für die eine Schaltfläche auf dem Controller gedrückt wird, und wir das InputClicked-Ereignis auszulösen.</span><span class="sxs-lookup"><span data-stu-id="21422-231">In the case of GamePadInput, we poll for the A button on the controller to be pressed, then we raise the InputClicked event.</span></span> <span data-ttu-id="21422-232">Im Fall von InteractionSourceInputSource lösen wir die InputClicked Ereignis als Antwort auf die TappedEvent.</span><span class="sxs-lookup"><span data-stu-id="21422-232">In the case of InteractionSourceInputSource, we raise the InputClicked event in response to the TappedEvent.</span></span>

<span data-ttu-id="21422-233">**Skript 2 - TapToPlace.cs**</span><span class="sxs-lookup"><span data-stu-id="21422-233">**Script 2 - TapToPlace.cs**</span></span>

<span data-ttu-id="21422-234">Navigieren Sie im Projektpanel zu **Assets\HoloToolkit\SpatialMapping\Scripts** und doppelklicken Sie auf **TapToPlace.cs** um ihn zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="21422-234">In the project panel navigate to **Assets\HoloToolkit\SpatialMapping\Scripts** and double click **TapToPlace.cs** to open it.</span></span>

<span data-ttu-id="21422-235">Erstes möchten, dass viele Entwickler implementieren, wenn eine Holographic-Anwendung erstellen, werden Hologramme mit Gesten Eingabe verschoben.</span><span class="sxs-lookup"><span data-stu-id="21422-235">The first thing many developers want to implement when creating a Holographic application is moving Holograms with gesture input.</span></span> <span data-ttu-id="21422-236">Daher haben wir versuchte, um das Skript gründlich zu kommentieren.</span><span class="sxs-lookup"><span data-stu-id="21422-236">As such, we've endeavored to thoroughly comment this script.</span></span> <span data-ttu-id="21422-237">Einige Dinge sind für dieses Tutorial wichtige.</span><span class="sxs-lookup"><span data-stu-id="21422-237">A few things are worth highlighting for this tutorial.</span></span>

<span data-ttu-id="21422-238">Notieren Sie sich zunächst, dass TapToPlace IInputClickHandler implementiert.</span><span class="sxs-lookup"><span data-stu-id="21422-238">First, note that TapToPlace implements IInputClickHandler.</span></span> <span data-ttu-id="21422-239">IInputClickHandler macht die Funktionen, die das InputClicked von ausgelöste Ereignis GamePadInput.cs oder InteractionSourceInputSource.cs zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="21422-239">IInputClickHandler exposes the functions that handle the InputClicked event raised by GamePadInput.cs or InteractionSourceInputSource.cs.</span></span> <span data-ttu-id="21422-240">OnInputClicked wird aufgerufen, wenn eine BaseInputSource einen Klick erkennt, während das Objekt mit TapToPlace im Fokus befindet.</span><span class="sxs-lookup"><span data-stu-id="21422-240">OnInputClicked is called when a BaseInputSource detects a click while the object with TapToPlace is in focus.</span></span> <span data-ttu-id="21422-241">Entweder Airtapping für HoloLens oder drücken die A-Taste auf der Xbox-Controller wird das Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="21422-241">Either airtapping on HoloLens or pressing the A button on the Xbox controller will trigger the event.</span></span>

<span data-ttu-id="21422-242">Zweitens ist der Code in aktualisieren, um festzustellen, ob eine Oberfläche Anzeigedaten, damit wir das spielobjekt, auf einer Oberfläche, wie eine Tabelle platzieren können ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="21422-242">Second is the code be executed in update to see if a surface is being looked at so we can place the game object on a surface, like a table.</span></span> <span data-ttu-id="21422-243">Die immersive Kopfhörer verfügt nicht über ein Konzept von echten Oberflächen, also das Objekt, das Tabelle oben (Vroom > TableThingy > Cube) gekennzeichnet wurde mit der Physik SpatialMapping, also des Strahls, umgewandelt in Update mit der virtuellen Tabelle oben in Konflikt stehen wird.</span><span class="sxs-lookup"><span data-stu-id="21422-243">The immersive headset doesn't have a concept of real surfaces, so the object that represents the table top (Vroom > TableThingy > Cube) has been marked with the SpatialMapping physics layer, so the ray cast in Update will collide with the virtual table top.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="21422-244">Nutzen Sie Ihre Arbeit</span><span class="sxs-lookup"><span data-stu-id="21422-244">Enjoy your progress</span></span>

<span data-ttu-id="21422-245">Dieses Mal können Sie der Insel, verschieben Sie ihn auswählen.</span><span class="sxs-lookup"><span data-stu-id="21422-245">This time you can select the island to move it.</span></span> <span data-ttu-id="21422-246">Für HoloLens können Sie die Insel auf eine echte Oberfläche verschieben.</span><span class="sxs-lookup"><span data-stu-id="21422-246">On HoloLens you can move the island to a real surface.</span></span> <span data-ttu-id="21422-247">In der immersive Kopfhörer können Sie die Insel auf der virtuellen Tabelle verschieben, die hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="21422-247">In the immersive headset you can move the island to the virtual table we added.</span></span>

## <a name="chapter-3---sharing"></a><span data-ttu-id="21422-248">Kapitel 3 - Freigabe</span><span class="sxs-lookup"><span data-stu-id="21422-248">Chapter 3 - Sharing</span></span>

>[!VIDEO https://www.youtube.com/embed/1diycJvxfDc]

### <a name="objectives"></a><span data-ttu-id="21422-249">Ziele</span><span class="sxs-lookup"><span data-stu-id="21422-249">Objectives</span></span>

<span data-ttu-id="21422-250">Stellen Sie sicher, dass das Netzwerk ordnungsgemäß konfiguriert ist und detail, wie Sie räumliche Anker zwischen Geräten gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="21422-250">Ensure that the network is correctly configured and detail how spatial anchors are shared between devices.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="21422-251">Was wir erstellen</span><span class="sxs-lookup"><span data-stu-id="21422-251">What we will build</span></span>

<span data-ttu-id="21422-252">Wir werden unser Projekt in ein Multiplayer-Projekt konvertieren.</span><span class="sxs-lookup"><span data-stu-id="21422-252">We will convert our project to a multiplayer project.</span></span> <span data-ttu-id="21422-253">Wir werden-Host oder Join-Sitzungen Benutzeroberfläche und Logik hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="21422-253">We will add UI and logic to host or join sessions.</span></span> <span data-ttu-id="21422-254">HoloLens-Benutzer sehen miteinander in der Sitzung mit Clouds über ihre Mal "Kopf" und immersive Kopfhörer-Benutzer haben Clouds Nähe, in dem der Anker ist.</span><span class="sxs-lookup"><span data-stu-id="21422-254">HoloLens users will see each other in the session with clouds over their heads, and immersive headset users have clouds near to where the anchor is.</span></span> <span data-ttu-id="21422-255">Benutzer in der immersive Headsets werden die HoloLens-Benutzern im Hinblick auf den Ursprung der Szene angezeigt.</span><span class="sxs-lookup"><span data-stu-id="21422-255">Users in the immersive headsets will see the HoloLens users relative to the origin of the scene.</span></span> <span data-ttu-id="21422-256">HoloLens-Benutzer sehen alle Hologramm der Dateninsel am selben Ort.</span><span class="sxs-lookup"><span data-stu-id="21422-256">HoloLens users will all see the hologram of the island in the same place.</span></span> <span data-ttu-id="21422-257">Es ist zu beachten Sie, dass die Benutzer in der immersive Headsets werden auf der ganzen Insel bei der nicht in diesem Kapitel verhält sich ähnlich, HoloLens, mit einem Vögel Einblick in die Insel Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="21422-257">It is key to note that the users in the immersive headsets will not be on the island during this chapter, but will behave very similarly to HoloLens, with a birds eye view of the island.</span></span>

### <a name="steps"></a><span data-ttu-id="21422-258">Schritte</span><span class="sxs-lookup"><span data-stu-id="21422-258">Steps</span></span>
* <span data-ttu-id="21422-259">Remove-Insel und VRRoom</span><span class="sxs-lookup"><span data-stu-id="21422-259">Remove Island and VRRoom</span></span>
    * <span data-ttu-id="21422-260">In **Hierarchie** mit der rechten Maustaste **Insel** wählen **löschen**</span><span class="sxs-lookup"><span data-stu-id="21422-260">In **Hierarchy** right-click **Island** select **Delete**</span></span>
    * <span data-ttu-id="21422-261">In **Hierarchie** mit der rechten Maustaste **VRRoom** wählen **löschen**</span><span class="sxs-lookup"><span data-stu-id="21422-261">In **Hierarchy** right-click **VRRoom** select **Delete**</span></span>
* <span data-ttu-id="21422-262">Hinzufügen von Usland</span><span class="sxs-lookup"><span data-stu-id="21422-262">Add Usland</span></span>
    * <span data-ttu-id="21422-263">Von **AppPrefabs** ziehen **Usland** zu **Hierarchie**.</span><span class="sxs-lookup"><span data-stu-id="21422-263">From **AppPrefabs** drag **Usland** to **Hierarchy**.</span></span>
* <span data-ttu-id="21422-264">Von **AppPrefabs** ziehen Sie jede der folgenden **Hierarchie**:</span><span class="sxs-lookup"><span data-stu-id="21422-264">From **AppPrefabs** drag each of the following to **Hierarchy**:</span></span>
    * <span data-ttu-id="21422-265">**UNETSharingStage**</span><span class="sxs-lookup"><span data-stu-id="21422-265">**UNETSharingStage**</span></span>
    * <span data-ttu-id="21422-266">**UNetAnchorRoot**</span><span class="sxs-lookup"><span data-stu-id="21422-266">**UNetAnchorRoot**</span></span>
    * <span data-ttu-id="21422-267">**UIContainer**</span><span class="sxs-lookup"><span data-stu-id="21422-267">**UIContainer**</span></span>
    * <span data-ttu-id="21422-268">**DebugPanelButton**</span><span class="sxs-lookup"><span data-stu-id="21422-268">**DebugPanelButton**</span></span>
* <span data-ttu-id="21422-269">Speichern Sie und erstellen Sie wie zuvor</span><span class="sxs-lookup"><span data-stu-id="21422-269">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="21422-270">Detaillierte Untersuchung des Codes</span><span class="sxs-lookup"><span data-stu-id="21422-270">Digging into the code</span></span>

<span data-ttu-id="21422-271">Navigieren Sie im Projektpanel zu **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** und doppelklicken Sie auf **UnetAnchorManager.cs**.</span><span class="sxs-lookup"><span data-stu-id="21422-271">In the project panel, navigate to **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** and double-click on **UnetAnchorManager.cs**.</span></span> <span data-ttu-id="21422-272">In der Nähe magische ist die Fähigkeit einer HoloLens-Tracking-Informationen mit einer anderen HoloLens freigeben, so, dass sowohl für Geräte mit den gleichen Speicherplatz freigeben können.</span><span class="sxs-lookup"><span data-stu-id="21422-272">The ability for one HoloLens to share tracking information with another HoloLens such that both devices can share the same space is near magical.</span></span> <span data-ttu-id="21422-273">Die Leistungsfähigkeit von mixed Reality ist aktiv, wenn zwei oder mehr Menschen mit denselben digitale Daten zusammenarbeiten können.</span><span class="sxs-lookup"><span data-stu-id="21422-273">The power of mixed reality comes alive when two or more people can collaborate using the same digital data.</span></span>

<span data-ttu-id="21422-274">Einige wichtige Punkte in diesem Skript:</span><span class="sxs-lookup"><span data-stu-id="21422-274">A few things to point out in this script:</span></span>

<span data-ttu-id="21422-275">Beachten Sie in der Startfunktion, die die Überprüfung auf **IsDisplayOpaque**.</span><span class="sxs-lookup"><span data-stu-id="21422-275">In the start function, notice the check for **IsDisplayOpaque**.</span></span> <span data-ttu-id="21422-276">In diesem Fall nehmen wir, dass es sich bei der Anker hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="21422-276">In this case, we pretend that the Anchor is established.</span></span> <span data-ttu-id="21422-277">Dies ist, da die immersive Headsets keine Möglichkeit zum Importieren oder Exportieren von Anker verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="21422-277">This is because the immersive headsets do not expose a way to import or export anchors.</span></span> <span data-ttu-id="21422-278">Wenn wir auf ein HoloLens ausgeführt werden, jedoch wird dieses Skript Freigabe Anker zwischen den Geräten implementiert.</span><span class="sxs-lookup"><span data-stu-id="21422-278">If we are running on a HoloLens, however, this script implements sharing anchors between the devices.</span></span> <span data-ttu-id="21422-279">Das Gerät, das die Sitzung gestartet wird, wird einen Anker für den Export von erstellt.</span><span class="sxs-lookup"><span data-stu-id="21422-279">The device that starts the session will create an anchor for exporting.</span></span> <span data-ttu-id="21422-280">Das Gerät, das einer Sitzung Beitritt fordert den Anker auf dem Gerät, das die Sitzung gestartet wurde.</span><span class="sxs-lookup"><span data-stu-id="21422-280">The device that joins a session will request the anchor from the device that started the session.</span></span>

<span data-ttu-id="21422-281">**Exportieren:**</span><span class="sxs-lookup"><span data-stu-id="21422-281">**Exporting:**</span></span>

<span data-ttu-id="21422-282">Wenn ein Benutzer eine Sitzung erstellt, wird die NetworkDiscoveryWithAnchors UNETAnchorManagers CreateAnchor-Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="21422-282">When a user creates a session, NetworkDiscoveryWithAnchors will call UNETAnchorManagers CreateAnchor function.</span></span> <span data-ttu-id="21422-283">Sehen wir uns CreateAnchor Flow an.</span><span class="sxs-lookup"><span data-stu-id="21422-283">Let's follow CreateAnchor flow.</span></span>

<span data-ttu-id="21422-284">Zunächst wird eine Überprüfung, beseitigen alle Daten, die wir für die vorherigen Anker gesammelt haben kann.</span><span class="sxs-lookup"><span data-stu-id="21422-284">We start by doing some housekeeping, clearing out any data we may have collected for previous anchors.</span></span> <span data-ttu-id="21422-285">Dann prüfen wir, liegt ein zwischengespeicherter Anker geladen.</span><span class="sxs-lookup"><span data-stu-id="21422-285">Then we check if there is a cached anchor to load.</span></span> <span data-ttu-id="21422-286">Die Anker-Daten ist meist zwischen 5 und 20 MB, sodass die Wiederverwendung von zwischengespeicherten Anker speichern kann, auf die Menge der Daten, die über das Netzwerk übertragen möchten.</span><span class="sxs-lookup"><span data-stu-id="21422-286">The anchor data tends to be between 5 and 20 MB, so reusing cached anchors can save on the amount of data we need to transfer over the network.</span></span> <span data-ttu-id="21422-287">Wir sehen später noch Funktionsweise.</span><span class="sxs-lookup"><span data-stu-id="21422-287">We'll see how this works a bit later.</span></span> <span data-ttu-id="21422-288">Auch wenn wir den Anker wiederverwenden, müssen wir dem Anker, die Daten für den Fall, dass ein neuer Client auf, die joins keine Anker zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="21422-288">Even if we are reusing the anchor, we need to get the anchor data ready in case a new client joins that doesn't have the anchor.</span></span>

<span data-ttu-id="21422-289">Apropos beim Abrufen der Anker-Daten bereit, macht die WorldAnchorTransferBatch-Klasse die Funktionalität zum Anker-Daten, die für das Senden an ein anderes Gerät oder -Anwendung und die Funktionalität zum Importieren der Anker-Daten vorbereiten.</span><span class="sxs-lookup"><span data-stu-id="21422-289">Speaking of getting the anchor data ready, the WorldAnchorTransferBatch class exposes the functionality to prepare anchor data for sending to another device or application and the functionality to import the anchor data.</span></span> <span data-ttu-id="21422-290">Da wir auf dem Exportpfad sind, werden wir die WorldAnchorTransferBatch unsere Anker hinzu, und rufen Sie die ExportAsync-Funktion.</span><span class="sxs-lookup"><span data-stu-id="21422-290">Since we're on the export path, we will add our anchor to the WorldAnchorTransferBatch and call the ExportAsync function.</span></span> <span data-ttu-id="21422-291">ExportAsync ruft dann den Rückruf WriteBuffer zu exportierenden Daten generieren.</span><span class="sxs-lookup"><span data-stu-id="21422-291">ExportAsync will then call the WriteBuffer callback as it generates data for export.</span></span> <span data-ttu-id="21422-292">Wenn alle Daten wurden exportiert wird ExportComplete aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="21422-292">When all of the data has been exported ExportComplete will be called.</span></span> <span data-ttu-id="21422-293">In WriteBuffer fügen wir den Datenblock, um eine Liste, die wir für den Export zu halten.</span><span class="sxs-lookup"><span data-stu-id="21422-293">In WriteBuffer we add the chunk of data to a list we keep for exporting.</span></span> <span data-ttu-id="21422-294">In ExportComplete konvertieren wir die Liste in ein Array.</span><span class="sxs-lookup"><span data-stu-id="21422-294">In ExportComplete we convert the list to an array.</span></span> <span data-ttu-id="21422-295">Die Variable AnchorName auch festgelegt ist löst die anderen Geräte Anker anfordern, wenn sie nicht darüber verfügen.</span><span class="sxs-lookup"><span data-stu-id="21422-295">The AnchorName variable is also set, which will trigger other devices to request the anchor if they don't have it.</span></span>

<span data-ttu-id="21422-296">In einigen Fällen, die der Anker wird nicht zu exportieren oder erstellt so wenig Daten, versucht es erneut.</span><span class="sxs-lookup"><span data-stu-id="21422-296">In some cases the anchor won't export or will create so little data that we will try again.</span></span> <span data-ttu-id="21422-297">Hier rufen wir einfach CreateAnchor erneut aus.</span><span class="sxs-lookup"><span data-stu-id="21422-297">Here we just call CreateAnchor again.</span></span>

<span data-ttu-id="21422-298">Eine letzte Funktion in den Exportpfad ist AnchorFoundRemotely.</span><span class="sxs-lookup"><span data-stu-id="21422-298">A final function in the export path is AnchorFoundRemotely.</span></span> <span data-ttu-id="21422-299">Bei den Anker in ein anderes Gerät gefunden wird, das Gerät informiert den Host und der Host werden verwendet, die als Signal, dass der Anker ein "guter Anker" ist und kann zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="21422-299">When another device finds the anchor, that device will tell the host, and the host will use that as a signal that the anchor is a "good anchor" and can be cached.</span></span>

<span data-ttu-id="21422-300">**Importieren von:**</span><span class="sxs-lookup"><span data-stu-id="21422-300">**Importing:**</span></span>

<span data-ttu-id="21422-301">Wenn eine HoloLens eine Sitzung beitritt, muss es einen Anker zu importieren.</span><span class="sxs-lookup"><span data-stu-id="21422-301">When a HoloLens joins a session, it needs to import an anchor.</span></span> <span data-ttu-id="21422-302">In UNETAnchorManagers Update-Funktion wird die AnchorName abgerufen.</span><span class="sxs-lookup"><span data-stu-id="21422-302">In UNETAnchorManager's Update function, the AnchorName is polled.</span></span> <span data-ttu-id="21422-303">Wenn der Ankername geändert wird, startet der Importvorgang.</span><span class="sxs-lookup"><span data-stu-id="21422-303">When the anchor name changes, the import process begins.</span></span> <span data-ttu-id="21422-304">Versuchen Sie zunächst, wir den Anker mit dem angegebenen Namen aus dem lokalen Premium-Speicher zu laden.</span><span class="sxs-lookup"><span data-stu-id="21422-304">First, we try to load the anchor with the specified name from the local anchor store.</span></span> <span data-ttu-id="21422-305">Wenn wir die bereits darüber verfügen, können wir es verwenden, ohne die Daten erneut herunterzuladen.</span><span class="sxs-lookup"><span data-stu-id="21422-305">If we already have it, we can use it without downloading the data again.</span></span> <span data-ttu-id="21422-306">Wenn wir nicht darüber verfügen, rufen wir WaitForAnchor dem Initiieren des Downloads wird.</span><span class="sxs-lookup"><span data-stu-id="21422-306">If we don't have it, then we call WaitForAnchor which will initiate the download.</span></span>

<span data-ttu-id="21422-307">Wenn der Download abgeschlossen ist, wird die NetworkTransmitter_dataReadyEvent aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="21422-307">When the download is completed, NetworkTransmitter_dataReadyEvent is called.</span></span> <span data-ttu-id="21422-308">Dies signalisiert der Aktualisierungsschleife des aufzurufenden ImportAsync mit den heruntergeladenen Daten.</span><span class="sxs-lookup"><span data-stu-id="21422-308">This will signal the Update loop to call ImportAsync with the downloaded data.</span></span> <span data-ttu-id="21422-309">ImportAsync wird ImportComplete aufgerufen, wenn der Importvorgang abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="21422-309">ImportAsync will call ImportComplete when the import process is complete.</span></span> <span data-ttu-id="21422-310">Wenn der Import erfolgreich ist, wird der Anker im lokalen Player-Speicher gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="21422-310">If the import is successful, the anchor will be saved in the local player store.</span></span> <span data-ttu-id="21422-311">"Playercontroller.cs" ruft tatsächlich die AnchorFoundRemotely, denen der Host weiß, dass ein guter Anker eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="21422-311">PlayerController.cs actually makes the call to AnchorFoundRemotely to let the host know that a good anchor has been established.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="21422-312">Nutzen Sie Ihre Arbeit</span><span class="sxs-lookup"><span data-stu-id="21422-312">Enjoy your progress</span></span>

<span data-ttu-id="21422-313">Dieses Mal ein Benutzer mit einem HoloLens Hosten einer Sitzung mit dem **Sitzung starten** Schaltfläche in der Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="21422-313">This time a user with a HoloLens will host a session using the **start session** button in the UI.</span></span> <span data-ttu-id="21422-314">Andere Benutzer, sowohl auf HoloLens oder eine immersive Kopfhörer, wählen Sie die Sitzung und wählen Sie dann die **Sitzung beitreten** Schaltfläche in der Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="21422-314">Other users, both on HoloLens or an immersive headset, will select the session and then select the **join session** button in the UI.</span></span> <span data-ttu-id="21422-315">Wenn Sie mehrere Benutzer mit HoloLens-Geräte verfügen, müssen sie über ihre Mal "Kopf" red-Clouds.</span><span class="sxs-lookup"><span data-stu-id="21422-315">If you have multiple people with HoloLens devices, they will have red clouds over their heads.</span></span> <span data-ttu-id="21422-316">Außerdem wird eine blaue Cloud für jeden immersive Kopfhörer, aber die blaue Clouds werden nicht über die Headsets, wie die Headsets nicht den gleichen koordinierten World-Bereich wie die HoloLens-Geräte ermitteln möchten.</span><span class="sxs-lookup"><span data-stu-id="21422-316">There will also be a blue cloud for each immersive headset, but the blue clouds will not be above the headsets, as the headsets are not trying to find the same world coordinate space as the HoloLens devices.</span></span>

<span data-ttu-id="21422-317">Diesem Punkt im Projekt ist eine enthaltene Anwendung für die Freigabe. es nicht sehr viel und kann als Basislinie dienen.</span><span class="sxs-lookup"><span data-stu-id="21422-317">This point in the project is a contained sharing application; it doesn't do very much, and could act as a baseline.</span></span> <span data-ttu-id="21422-318">Beginnen wir in den nächsten Kapiteln erstellen eine Umgebung für die Freude bereitet.</span><span class="sxs-lookup"><span data-stu-id="21422-318">In the next chapters, we will start building an experience for people to enjoy.</span></span> <span data-ttu-id="21422-319">Um weitere Anleitungen zu gemeinsamen Erfahrung Entwurf zu erhalten, finden Sie hier.</span><span class="sxs-lookup"><span data-stu-id="21422-319">To get further guidance on shared experience design, go here.</span></span>

## <a name="chapter-4---immersion-and-teleporting"></a><span data-ttu-id="21422-320">Kapitel 4: Immersion und teleporting</span><span class="sxs-lookup"><span data-stu-id="21422-320">Chapter 4 - Immersion and teleporting</span></span>

>[!VIDEO https://www.youtube.com/embed/kUHZ5tCOfvY]

### <a name="objectives"></a><span data-ttu-id="21422-321">Ziele</span><span class="sxs-lookup"><span data-stu-id="21422-321">Objectives</span></span>

<span data-ttu-id="21422-322">Die Erfahrung mit jeder Art von mixed Reality-Geräte zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="21422-322">Cater the experience to each type of mixed reality device.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="21422-323">Was wir erstellen</span><span class="sxs-lookup"><span data-stu-id="21422-323">What we will build</span></span>

<span data-ttu-id="21422-324">Die Anwendung auf der ganzen Insel mit einer immersive Sicht einzufügenden immersive Kopfhörer Benutzer werden aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="21422-324">We will update the application to put immersive headset users on the island with an immersive view.</span></span> <span data-ttu-id="21422-325">HoloLens-Benutzer haben weiterhin die Vogelperspektive der Dateninsel.</span><span class="sxs-lookup"><span data-stu-id="21422-325">HoloLens users will still have the bird's eye view of the island.</span></span> <span data-ttu-id="21422-326">Benutzer von jeder Gerätetyp können andere Benutzer sehen, wie sie in der ganzen Welt angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="21422-326">Users of each device type can see other users as they appear in the world.</span></span> <span data-ttu-id="21422-327">Z. B. immersive Kopfhörer Benutzer sehen die anderen Avatare auf andere Pfade auf der ganzen Insel, und sie sehen die HoloLens-Benutzer als giant Clouds über Insel.</span><span class="sxs-lookup"><span data-stu-id="21422-327">For instance, immersive headset users can see the other avatars on other paths on the island, and they see the HoloLens users as giant clouds above the island.</span></span> <span data-ttu-id="21422-328">Immersive Kopfhörer-Benutzer sehen den Cursor des Benutzers, der die HoloLens Blicke Chow auch, wenn der Benutzer HoloLens Insel angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="21422-328">Immersive headset users will also see the cursor of the HoloLens user's gaze ray if the HoloLens user is looking at the island.</span></span> <span data-ttu-id="21422-329">HoloLens-Benutzer sehen einen Avatar auf der Insel, jede immersive Kopfhörer-Benutzer darstellt.</span><span class="sxs-lookup"><span data-stu-id="21422-329">HoloLens users will see an avatar on the island to represent each immersive headset user.</span></span>

<span data-ttu-id="21422-330">**Aktualisierte Eingaben für die immersiven Gerät:**</span><span class="sxs-lookup"><span data-stu-id="21422-330">**Updated Input for the Immersive device:**</span></span>
* <span data-ttu-id="21422-331">Die linke rekordzahl und rechts rekordzahl Schaltflächen auf der Xbox-Controller Drehen des Players</span><span class="sxs-lookup"><span data-stu-id="21422-331">The left bumper and right bumper buttons on the Xbox controller rotate the player</span></span>
* <span data-ttu-id="21422-332">Halten die Schaltfläche "Y" auf dem Xbox-Controller wird aktiviert. eine [Teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) Cursor.</span><span class="sxs-lookup"><span data-stu-id="21422-332">Holding the Y button on the Xbox controller will enable a [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) cursor.</span></span> <span data-ttu-id="21422-333">Wenn der Cursor mit Pfeil wird ein drehindikator hat, wenn Sie die Schaltfläche "Y" freigeben, werden Sie Teleported auf die Position des Cursors.</span><span class="sxs-lookup"><span data-stu-id="21422-333">If the cursor has a spinning arrow indicator when you release the Y button, you will be teleported to the cursor's location.</span></span>

### <a name="steps"></a><span data-ttu-id="21422-334">Schritte</span><span class="sxs-lookup"><span data-stu-id="21422-334">Steps</span></span>
* <span data-ttu-id="21422-335">MixedRealityCameraParent MixedRealityTeleport hinzugefügt</span><span class="sxs-lookup"><span data-stu-id="21422-335">Add MixedRealityTeleport to MixedRealityCameraParent</span></span>
    * <span data-ttu-id="21422-336">In **Hierarchie**Option **Usland**.</span><span class="sxs-lookup"><span data-stu-id="21422-336">In **Hierarchy**, select **Usland**.</span></span>
    * <span data-ttu-id="21422-337">In **Inspektor**, aktivieren Sie **Kontrolle**.</span><span class="sxs-lookup"><span data-stu-id="21422-337">In **Inspector**, enable **Level Control**.</span></span>
    * <span data-ttu-id="21422-338">In **Hierarchie**Option **MixedRealityCameraParent**.</span><span class="sxs-lookup"><span data-stu-id="21422-338">In **Hierarchy**, select **MixedRealityCameraParent**.</span></span>
    * <span data-ttu-id="21422-339">In **Inspektor**, klicken Sie auf **Add Component**.</span><span class="sxs-lookup"><span data-stu-id="21422-339">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="21422-340">Typ **Mixed Reality Teleport** und wählen Sie ihn.</span><span class="sxs-lookup"><span data-stu-id="21422-340">Type **Mixed Reality Teleport** and select it.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="21422-341">Detaillierte Untersuchung des Codes</span><span class="sxs-lookup"><span data-stu-id="21422-341">Digging into the code</span></span>

<span data-ttu-id="21422-342">Immersive Kopfhörer Benutzer werden an ihre PCs über ein Kabel angeschlossen werden, aber unsere Insel ist größer als das Kabel lang ist.</span><span class="sxs-lookup"><span data-stu-id="21422-342">Immersive headset users will be tethered to their PCs with a cable, but our island is larger than the cable is long.</span></span> <span data-ttu-id="21422-343">Um dies auszugleichen, benötigen wir die Möglichkeit, verschieben Sie die Kamera unabhängig von der während der Übertragung des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="21422-343">To compensate, we need the ability to move the camera independently of the user's motion.</span></span> <span data-ttu-id="21422-344">Informieren Sie sich die [bequem Seite](comfort.md) für Weitere Informationen zum Entwerfen Ihrer mixed Reality-Anwendung (insbesondere selbst während der Übertragung und Locomotion).</span><span class="sxs-lookup"><span data-stu-id="21422-344">Please see the [comfort page](comfort.md) for more information about designing your mixed reality application (in particular self motion and locomotion).</span></span>

<span data-ttu-id="21422-345">Um diesen Prozess zu beschreiben werden nützlich, um zwei Begriffe definiert.</span><span class="sxs-lookup"><span data-stu-id="21422-345">In order to describe this process it will be useful to define two terms.</span></span> <span data-ttu-id="21422-346">Zuerst **Transportwagen** wird das Objekt, das die Kamera unabhängig vom Benutzer verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="21422-346">First, **dolly** will be the object that moves the camera independently from the user.</span></span> <span data-ttu-id="21422-347">Von einem untergeordneten-spielobjekt der **Transportwagen** werden die **Hauptkamera**.</span><span class="sxs-lookup"><span data-stu-id="21422-347">A child game object of the **dolly** will be the **main camera**.</span></span> <span data-ttu-id="21422-348">Der Hauptkamera ist an des Benutzers Head angefügt.</span><span class="sxs-lookup"><span data-stu-id="21422-348">The main camera is attached to the user's head.</span></span>

<span data-ttu-id="21422-349">Navigieren Sie im Projektpanel zu **Assets\AppPrefabs\Support\Scripts\GameLogic** und doppelklicken Sie auf **MixedRealityTeleport.cs**.</span><span class="sxs-lookup"><span data-stu-id="21422-349">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **MixedRealityTeleport.cs**.</span></span>

<span data-ttu-id="21422-350">MixedRealityTeleport verfügt über zwei Aufträge.</span><span class="sxs-lookup"><span data-stu-id="21422-350">MixedRealityTeleport has two jobs.</span></span> <span data-ttu-id="21422-351">Zuerst verarbeitet sie mithilfe der Rückstoßelemente Drehung.</span><span class="sxs-lookup"><span data-stu-id="21422-351">First, it handles rotation using the bumpers.</span></span> <span data-ttu-id="21422-352">In der Update-Funktion Fragen wir nach "ButtonUp" LeftBumper und RightBumper ab.</span><span class="sxs-lookup"><span data-stu-id="21422-352">In the update function we poll for 'ButtonUp' on LeftBumper and RightBumper.</span></span> <span data-ttu-id="21422-353">GetButtonUp nur gibt true zurück, auf den ersten Frame, die, den eine Schaltfläche aktiviert ist, nachdem er sich zuvor nach unten.</span><span class="sxs-lookup"><span data-stu-id="21422-353">GetButtonUp only returns true on the first frame a button is up after having been down.</span></span> <span data-ttu-id="21422-354">Wenn eine der Schaltflächen ausgelöst worden wäre, wissen wir, dass der Benutzer muss zum Drehen.</span><span class="sxs-lookup"><span data-stu-id="21422-354">If either button had been raised, then we know the user needs to rotate.</span></span>

<span data-ttu-id="21422-355">Wenn wir drehen wir ausblenden und mit einem einfachen Skript namens "fade Steuerelement" eingeblendet.</span><span class="sxs-lookup"><span data-stu-id="21422-355">When we rotate we do a fade out and fade in using a simple script called 'fade control'.</span></span> <span data-ttu-id="21422-356">Wir tun dies, um zu verhindern, dass den Benutzer eine unnatürliche Verschiebung Dies kann zu übermäßig führen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="21422-356">We do this to prevent the user from seeing an unnatural movement which could lead to discomfort.</span></span> <span data-ttu-id="21422-357">Das Ausblenden ist wirksam ein-und recht einfach.</span><span class="sxs-lookup"><span data-stu-id="21422-357">The fade in and out effect is fairly simple.</span></span> <span data-ttu-id="21422-358">Wir haben die schwarzen Gevierts hängt vor der **Hauptkamera**.</span><span class="sxs-lookup"><span data-stu-id="21422-358">We have a black quad hanging in front of the **main camera**.</span></span> <span data-ttu-id="21422-359">Wenn ausgeblendet wird, wechseln wir den alpha-Wert zwischen 0 und 1.</span><span class="sxs-lookup"><span data-stu-id="21422-359">When fading out we transition the alpha value from 0 to 1.</span></span> <span data-ttu-id="21422-360">Dadurch wird schrittweise die schwarze Pixel den Quad-Rendern und verschleiern etwas dahinter.</span><span class="sxs-lookup"><span data-stu-id="21422-360">This gradually causes the black pixels of the quad to render and obscure anything behind them.</span></span> <span data-ttu-id="21422-361">Wenn wieder eingeblendet wechseln wir den alpha-Wert auf Null zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="21422-361">When fading back in we transition the alpha value back to zero.</span></span>

<span data-ttu-id="21422-362">Wenn wir die Drehung berechnen, beachten Sie, dass wir Rotation ausführen unserer **Transportwagen** aber berechnen die Drehung um die **Hauptkamera**.</span><span class="sxs-lookup"><span data-stu-id="21422-362">When we calculate the rotation, note that we are rotating our **dolly** but calculating the rotation around the **main camera**.</span></span> <span data-ttu-id="21422-363">Dies ist wichtig, da je weiter die **Hauptkamera** wird von 0,0,0, desto weniger genau eine Drehung um die Transportwagen würde aus der Perspektive des Benutzers werden.</span><span class="sxs-lookup"><span data-stu-id="21422-363">This is important as the farther the **main camera** is away from 0,0,0, the less accurate a rotation around the dolly would become from the point of view of the user.</span></span> <span data-ttu-id="21422-364">In der Tat, wenn Sie nicht rund um die Kameraposition drehen, der Benutzer wechselt in einen Bogen rund um die **Transportwagen** anstatt zu drehen.</span><span class="sxs-lookup"><span data-stu-id="21422-364">In fact, if you do not rotate around the camera position, the user will move on an arc around the **dolly** rather than rotating.</span></span>

<span data-ttu-id="21422-365">Der zweite Auftrag für MixedRealityTeleport ist, behandelt das Verschieben der **Transportwagen**.</span><span class="sxs-lookup"><span data-stu-id="21422-365">The second job for MixedRealityTeleport is to handle moving the **dolly**.</span></span> <span data-ttu-id="21422-366">Dies erfolgt in SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="21422-366">This is done in SetWorldPosition.</span></span> <span data-ttu-id="21422-367">SetWorldPosition nimmt die gewünschten World-Position, die Position, in denen der Benutzer Percieve möchte, die sie darstellen.</span><span class="sxs-lookup"><span data-stu-id="21422-367">SetWorldPosition takes the desired world position, the position where the user wants to percieve that they inhabit.</span></span> <span data-ttu-id="21422-368">Müssen wir fügen unserer **Transportwagen** an dieser Position minus der lokalen Position des der **Hauptkamera**, wie dem Offset jeden Frame hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="21422-368">We need to put our **dolly** at that position minus the local position of the **main camera**, as that offset will be added each frame.</span></span>

<span data-ttu-id="21422-369">Ein zweites Skript ruft SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="21422-369">A second script calls SetWorldPosition.</span></span> <span data-ttu-id="21422-370">Betrachten Sie das Skript aus.</span><span class="sxs-lookup"><span data-stu-id="21422-370">Let's look at that script.</span></span> <span data-ttu-id="21422-371">Navigieren Sie im Projektpanel zu **Assets\AppPrefabs\Support\Scripts\GameLogic** und doppelklicken Sie auf **TeleportScript.cs**.</span><span class="sxs-lookup"><span data-stu-id="21422-371">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **TeleportScript.cs**.</span></span>

<span data-ttu-id="21422-372">Dieses Skript ist ein bisschen komplizierter als das MixedRealityTeleport.</span><span class="sxs-lookup"><span data-stu-id="21422-372">This script is a little more involved than MixedRealityTeleport.</span></span> <span data-ttu-id="21422-373">Das Skript überprüft für die Y-Schaltfläche gedrückt halten, auf dem Xbox-Controller.</span><span class="sxs-lookup"><span data-stu-id="21422-373">The script is checking for the Y Button on the Xbox controller to be held down.</span></span> <span data-ttu-id="21422-374">Während der gehalten wird, wird unten eine Teleport Cursor wird gerendert, und das Skript wandelt ein Strahl von Blicke-Position des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="21422-374">While the button is held down a teleport cursor is rendered and the script casts a ray from the user's gaze position.</span></span> <span data-ttu-id="21422-375">Wenn, Chow mit einer Oberfläche kollidiert, der größer oder kleiner ist nach oben weisenden die Oberfläche betrachtet eine gute Zeichenoberfläche Teleport, und die Animation für den Cursor Teleport wird aktiviert.</span><span class="sxs-lookup"><span data-stu-id="21422-375">If that ray collides with a surface that is more or less pointing up, the surface will be considered a good surface to teleport to, and the animation on the teleport cursor will be enabled.</span></span> <span data-ttu-id="21422-376">Wenn es sich bei der Strahl nicht mit einer Oberfläche, die mehr oder weniger zeigen, in Konflikt stehen, ist die Animation für den Cursor deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="21422-376">If the ray does not collide with a surface more or less pointing up, then the animation on the cursor will be disabled.</span></span> <span data-ttu-id="21422-377">Wenn die Schaltfläche "Y" wird veröffentlicht, und der berechneten Punkt des Strahls eine gültige Position ist, wird das Skript SetWorldPosition mit der Position, die vom Strahl geschnitten wurde, aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="21422-377">When the Y button is released and the calculated point of the ray is a valid position, the script calls SetWorldPosition with the position the ray intersected.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="21422-378">Nutzen Sie Ihre Arbeit</span><span class="sxs-lookup"><span data-stu-id="21422-378">Enjoy your progress</span></span>

<span data-ttu-id="21422-379">Diesmal müssen Sie einen Freund zu finden.</span><span class="sxs-lookup"><span data-stu-id="21422-379">This time you'll need to find a friend.</span></span>

<span data-ttu-id="21422-380">Auch hier hostet ein Benutzer mit der HoloLens eine Sitzung.</span><span class="sxs-lookup"><span data-stu-id="21422-380">Once again, a user with the HoloLens will host a session.</span></span> <span data-ttu-id="21422-381">Andere Benutzer werden der Sitzung beizutreten.</span><span class="sxs-lookup"><span data-stu-id="21422-381">Other users will join the session.</span></span> <span data-ttu-id="21422-382">Die Anwendung werden die ersten drei Benutzern den Beitritt in eine immersive Kopfhörer auf einem von drei wegen, auf der ganzen Insel zu platzieren.</span><span class="sxs-lookup"><span data-stu-id="21422-382">The application will place the first three users to join from an immersive headset on one of the three paths on the island.</span></span> <span data-ttu-id="21422-383">Insel in diesem Abschnitt untersuchen können.</span><span class="sxs-lookup"><span data-stu-id="21422-383">Feel free to explore the island in this section.</span></span>

<span data-ttu-id="21422-384">Details zu beachten:</span><span class="sxs-lookup"><span data-stu-id="21422-384">Details to notice:</span></span>
1. <span data-ttu-id="21422-385">Sie können sehen, Gesichtern in der Cloud, wodurch einen aufbewahrt Benutzer zur Richtung, finden Sie unter Benutzer HoloLens sieht.</span><span class="sxs-lookup"><span data-stu-id="21422-385">You can see faces in the clouds, which helps an immersed user see which direction a HoloLens user is looking.</span></span>
2. <span data-ttu-id="21422-386">Die Avatare auf der ganzen Insel haben Necks, die zu drehen.</span><span class="sxs-lookup"><span data-stu-id="21422-386">The avatars on the island have necks that rotate.</span></span> <span data-ttu-id="21422-387">Sie wird nicht einhalten, wozu dient der Benutzer ist real Realität (wir keine dieser Informationen haben), sondern stellt dies eine gute Erfahrung.</span><span class="sxs-lookup"><span data-stu-id="21422-387">They won't follow what the user is doing is real reality (we don't have that information) but it makes for a nice experience.</span></span>
3. <span data-ttu-id="21422-388">Wenn es sich bei der HoloLens-Benutzer auf der ganzen Insel sucht, können der aufbewahrt Benutzern ihren Cursor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="21422-388">If the HoloLens user is looking at the Island, the immersed users can see their cursor.</span></span>
4. <span data-ttu-id="21422-389">Die Clouds, die die Benutzer HoloLens darstellen Schatten.</span><span class="sxs-lookup"><span data-stu-id="21422-389">The clouds that represent the HoloLens users cast shadows.</span></span>

## <a name="chapter-5---finale"></a><span data-ttu-id="21422-390">Kapitel 5 - Erfahrung</span><span class="sxs-lookup"><span data-stu-id="21422-390">Chapter 5 - Finale</span></span>

>[!VIDEO https://www.youtube.com/embed/n_HDWJbfpNg]

### <a name="objectives"></a><span data-ttu-id="21422-391">Ziele</span><span class="sxs-lookup"><span data-stu-id="21422-391">Objectives</span></span>

<span data-ttu-id="21422-392">Erstellen Sie eine interaktive Umgebung für die Zusammenarbeit zwischen den beiden Typen.</span><span class="sxs-lookup"><span data-stu-id="21422-392">Create a collaborative interactive experience between the two device types.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="21422-393">Was wir erstellen</span><span class="sxs-lookup"><span data-stu-id="21422-393">What we will build</span></span>

<span data-ttu-id="21422-394">Erstellen in Kapitel 4, wenn ein Benutzer mit einem immersive Kopfhörer in der Nähe eines Rätsels auf der ganzen Insel erhält, werden die HoloLens-Benutzer eine QuickInfo mit einen Hinweis für das Rätsel angezeigt.</span><span class="sxs-lookup"><span data-stu-id="21422-394">Building on chapter 4, when a user with an immersive headset gets near a puzzle on the island, the HoloLens users will get a tool tip with a clue to the puzzle.</span></span> <span data-ttu-id="21422-395">Nachdem alle immersive Kopfhörer Benutzer über die Puzzles und auf das Feld"bereit" im Raum Rocket erhalten haben, wird die Rocket gestartet.</span><span class="sxs-lookup"><span data-stu-id="21422-395">Once all of the immersive headset users get past their puzzles and onto the "ready pad" in the rocket room, the rocket will launch.</span></span>

### <a name="steps"></a><span data-ttu-id="21422-396">Schritte</span><span class="sxs-lookup"><span data-stu-id="21422-396">Steps</span></span>
* <span data-ttu-id="21422-397">In **Hierarchie**Option **Usland**.</span><span class="sxs-lookup"><span data-stu-id="21422-397">In **Hierarchy**, select **Usland**.</span></span>
* <span data-ttu-id="21422-398">In **Inspektor**im **Kontrolle**, überprüfen Sie **Zusammenarbeit ermöglichen**.</span><span class="sxs-lookup"><span data-stu-id="21422-398">In **Inspector**, in **Level Control**, check **Enable Collaboration**.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="21422-399">Detaillierte Untersuchung des Codes</span><span class="sxs-lookup"><span data-stu-id="21422-399">Digging into the code</span></span>

<span data-ttu-id="21422-400">Jetzt sehen wir uns am LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="21422-400">Now let us look at LevelControl.cs.</span></span> <span data-ttu-id="21422-401">Dieses Skript ist das Kernstück von die Spiellogik und behält den Status des spielen.</span><span class="sxs-lookup"><span data-stu-id="21422-401">This script is the core of the game logic and maintains the game state.</span></span> <span data-ttu-id="21422-402">Da dies ein Multiplayer-Spiel mithilfe von UNET ist müssen wir verstehen, mindestens gut genug den Datenfluss so ändern Sie in diesem Tutorial.</span><span class="sxs-lookup"><span data-stu-id="21422-402">Since this is a multiplayer game using UNET we need to understand how data flows, at least well enough to modify this tutorial.</span></span> <span data-ttu-id="21422-403">Eine vollständige Übersicht über UNET finden Sie in der Unity-Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="21422-403">For a more complete overview of UNET, please refer to Unity's documentation.</span></span>

<span data-ttu-id="21422-404">Navigieren Sie im Projektpanel zu **Assets\AppPrefabs\Support\Scripts\GameLogic** und doppelklicken Sie auf **LevelControl.cs**.</span><span class="sxs-lookup"><span data-stu-id="21422-404">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **LevelControl.cs**.</span></span>

<span data-ttu-id="21422-405">Lassen Sie uns wissen Sie, wie eine immersive Kopfhörer gibt an, dass sie bereit für den Start Rocket.</span><span class="sxs-lookup"><span data-stu-id="21422-405">Let us understand how an immersive headset indicates that they are ready for the rocket launch.</span></span> <span data-ttu-id="21422-406">Start-Bereitschaft Rocket wird durch Festlegen einer der drei Knoteneigenschaften in einer Liste von Knoteneigenschaften, die die Pfade auf der ganzen Insel entsprechen, kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="21422-406">Rocket Launch readiness is communicated by setting one of three bools in a list of bools that correspond to the three paths on the island.</span></span> <span data-ttu-id="21422-407">Des Pfads "bool" wird festgelegt, wenn der Benutzer, die dem Pfad zugewiesene über das Pad "brown" in den Raum Rocket ist.</span><span class="sxs-lookup"><span data-stu-id="21422-407">A path's bool will be set when the user assigned to the path is on top of the brown pad inside the rocket room.</span></span> <span data-ttu-id="21422-408">Okay, jetzt in den Details.</span><span class="sxs-lookup"><span data-stu-id="21422-408">Okay, now to the details.</span></span>

<span data-ttu-id="21422-409">Es wird in die Update()-Funktion gestartet.</span><span class="sxs-lookup"><span data-stu-id="21422-409">We will start in the Update() function.</span></span> <span data-ttu-id="21422-410">Sie werden feststellen, dass eine Funktion "Spickzettel" vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="21422-410">You will note that there is a 'cheat' function.</span></span> <span data-ttu-id="21422-411">Es bedeutete das in der Entwicklung, Testen des Rocket Start, und setzen Sie Sequenz.</span><span class="sxs-lookup"><span data-stu-id="21422-411">We used this in development to test the rocket launch and reset sequence.</span></span> <span data-ttu-id="21422-412">Andernfalls funktioniert es nicht in die Multi-Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="21422-412">It won't work in the multi user experience.</span></span> <span data-ttu-id="21422-413">Hoffentlich können mit der Zeit, die Sie die folgenden Informationen verinnerlichen Sie dafür erforderlichen.</span><span class="sxs-lookup"><span data-stu-id="21422-413">Hopefully by the time you internalize the following infromation you can make it work.</span></span> <span data-ttu-id="21422-414">Nachdem wir überprüfen, um festzustellen, ob wir cheat sollten, überprüfen wir festzustellen, ob der lokale Player befinden, ist.</span><span class="sxs-lookup"><span data-stu-id="21422-414">After we check to see if we should cheat, we check to see if the local player is immersed.</span></span> <span data-ttu-id="21422-415">Wir möchten konzentrieren, wie wir, dass wir auf das Ziel sind suchen.</span><span class="sxs-lookup"><span data-stu-id="21422-415">We want to focus on how we find that we're at the goal.</span></span> <span data-ttu-id="21422-416">In der If (befinden) zu überprüfen, erfolgt ein Aufruf von CheckGoal ausblenden hinter der **EnableCollaboration** "bool".</span><span class="sxs-lookup"><span data-stu-id="21422-416">Inside of the if (Immersed) check, there is a call to CheckGoal hiding behind the **EnableCollaboration** bool.</span></span> <span data-ttu-id="21422-417">Dies entspricht das Kontrollkästchen, die, das Sie überprüft haben, während Sie die Schritte in diesem Kapitel.</span><span class="sxs-lookup"><span data-stu-id="21422-417">This corresponds to the checkbox you checked while completing the steps for this chapter.</span></span> <span data-ttu-id="21422-418">Innerhalb von EnableCollaboration sehen wir einen Aufruf von CheckGoal().</span><span class="sxs-lookup"><span data-stu-id="21422-418">Inside of EnableCollaboration we see a call to CheckGoal().</span></span>

<span data-ttu-id="21422-419">CheckGoal führt einiger Berechnungen aus, um festzustellen, ob es sind mehr oder weniger ständigen Block auf.</span><span class="sxs-lookup"><span data-stu-id="21422-419">CheckGoal does some math to see if we are more or less standing on the pad.</span></span> <span data-ttu-id="21422-420">Wir rufen wir "Debug.log", "Am Ziel angekommen" und anschließend "SendAtGoalMessage()".</span><span class="sxs-lookup"><span data-stu-id="21422-420">When we are, we Debug.Log "Arrived at goal" and then we call 'SendAtGoalMessage()'.</span></span> <span data-ttu-id="21422-421">In SendAtGoalMessage rufen wir playerController.SendAtGoal.</span><span class="sxs-lookup"><span data-stu-id="21422-421">In SendAtGoalMessage we call playerController.SendAtGoal.</span></span> <span data-ttu-id="21422-422">Um Zeit zu sparen, ist hier der Code ein:</span><span class="sxs-lookup"><span data-stu-id="21422-422">To save you some time, here's the code:</span></span>

```cs
private void CmdSendAtGoal(int GoalIndex)
       {
           levelState.SetGoalIndex(GoalIndex);
       }
```

```cs
public void SendAtGoal(int GoalIndex)
       {
           if (isLocalPlayer)
           {
               Debug.Log("sending at goal " + GoalIndex);
               CmdSendAtGoal(GoalIndex);
           }
       }
```

<span data-ttu-id="21422-423">Beachten Sie, dass SendAtGoalMessage CmdSendAtGoal, welche levelState.SetGoalIndex Aufrufe aufruft, die wieder LevelControl.cs aufweist.</span><span class="sxs-lookup"><span data-stu-id="21422-423">Note that SendAtGoalMessage calls CmdSendAtGoal, which calls levelState.SetGoalIndex, which is back in LevelControl.cs.</span></span> <span data-ttu-id="21422-424">Auf den ersten Blick scheint dies seltsam.</span><span class="sxs-lookup"><span data-stu-id="21422-424">At first glance this seems strange.</span></span> <span data-ttu-id="21422-425">Warum nicht rufen einfach SetGoalIndex anstatt diese seltsame routing über den Player-Controller?</span><span class="sxs-lookup"><span data-stu-id="21422-425">Why not just call SetGoalIndex rather than this strange routing through the player controller?</span></span> <span data-ttu-id="21422-426">Der Grund ist, dass wir in das Datenmodell übereinstimmen, die UNET verwendet wird, um Daten synchron zu halten. Um Aktivitäten und arbeitsspeicherüberlastung zu vermeiden, erfordert UNET an, dass jedes Objekt verfügt über einen Benutzer, wer hat die synchronisierten Variablen zu ändern.</span><span class="sxs-lookup"><span data-stu-id="21422-426">The reason is that we are conforming to the data model UNET uses to keep data in sync. To prevent cheating and thrashing, UNET requires that each object has a user who has authority to change the synchronized variables.</span></span> <span data-ttu-id="21422-427">Darüber hinaus kann nur vom Host (der Benutzer, die die Sitzung gestartet wurde) Daten direkt ändern.</span><span class="sxs-lookup"><span data-stu-id="21422-427">Further, only the host (the user that started the session) can change data directly.</span></span> <span data-ttu-id="21422-428">Benutzer, die nicht dem Host, jedoch haben die Autorität für die "Command" an den Host gesendet, wodurch die Variable geändert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="21422-428">Users who are not the host, but have authority, need to send a 'command' to the host which will change the variable.</span></span> <span data-ttu-id="21422-429">Standardmäßig hat der Host Autorität über alle Objekte, mit Ausnahme des Objekts erzeugt werden, um den Benutzer darzustellen.</span><span class="sxs-lookup"><span data-stu-id="21422-429">By default the host has authority over all objects, except for the object spawned to represent the user.</span></span> <span data-ttu-id="21422-430">In diesem Fall hat dieses Objekt das playercontoller-Skript.</span><span class="sxs-lookup"><span data-stu-id="21422-430">In our case this object has the playercontroller script.</span></span> <span data-ttu-id="21422-431">Es gibt eine Möglichkeit zum Anfordern von Autorität für die ein Objekt, und klicken Sie dann Änderungen vornehmen, aber wählen wir die Tatsache nutzen, dass die Player-Controller selbst Autorität und folgenden Route-Befehle über den Player-Controller verfügt.</span><span class="sxs-lookup"><span data-stu-id="21422-431">There is a way to request authority for an object and then make changes, but we choose to leverage the fact that the player controller has self authority and route commands through the player controller.</span></span>

<span data-ttu-id="21422-432">Anders ausgedrückt, haben wir uns an unser Ziel gefunden, muss des Spielers den Host darüber informieren und der Host wird angewiesen, alle anderen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="21422-432">Said another way, when we've found ourselves at our goal, the player needs to tell the host, and the host will tell everyone else.</span></span>

<span data-ttu-id="21422-433">Im LevelControl.cs SetGoalIndex ansehen.</span><span class="sxs-lookup"><span data-stu-id="21422-433">Back in LevelControl.cs look at SetGoalIndex.</span></span> <span data-ttu-id="21422-434">Hier wird den Wert eines Werts in einem Synclist (AtGoal) festgelegt.</span><span class="sxs-lookup"><span data-stu-id="21422-434">Here we are setting the value of a value in a synclist (AtGoal).</span></span> <span data-ttu-id="21422-435">Denken Sie daran, dass wir im Kontext des Hosts arbeiten, während dies zu tun.</span><span class="sxs-lookup"><span data-stu-id="21422-435">Remember that we are in the context of the host while we do this.</span></span> <span data-ttu-id="21422-436">Ähnlich wie ein Befehl ist RPC etwas, das der Host ausgeben kann, die alle Clients, die zum Ausführen von Code führen.</span><span class="sxs-lookup"><span data-stu-id="21422-436">Similar to a command, an RPC is something the host can issue that will cause all clients to run some code.</span></span> <span data-ttu-id="21422-437">Hier rufen wir "RpcCheckAllGoals".</span><span class="sxs-lookup"><span data-stu-id="21422-437">Here we call 'RpcCheckAllGoals'.</span></span> <span data-ttu-id="21422-438">Jeder Client einzeln aktivieren, um festzustellen, ob alle drei AtGoals festgelegt sind, und wenn dies der Fall ist, starten den Rocket.</span><span class="sxs-lookup"><span data-stu-id="21422-438">Each client will individually check to see if all three AtGoals are set, and if so, launch the rocket.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="21422-439">Nutzen Sie Ihre Arbeit</span><span class="sxs-lookup"><span data-stu-id="21422-439">Enjoy your progress</span></span>

<span data-ttu-id="21422-440">Basierend auf dem vorhergehenden Kapitel wird starten die Sitzung als vor dem wir.</span><span class="sxs-lookup"><span data-stu-id="21422-440">Building on the previous chapter, we will start the session as before.</span></span> <span data-ttu-id="21422-441">Diesmal, wie die Benutzer immersive Kopfhörer abrufen, die "Tür" auf ihrem Pfad, wird eine QuickInfo angezeigt werden, dass nur die HoloLens-Benutzer sehen können.</span><span class="sxs-lookup"><span data-stu-id="21422-441">This time as the users in the immersive headset get to the "door" on their path, a tooltip will appear that only the HoloLens users can see.</span></span> <span data-ttu-id="21422-442">Die HoloLens-Benutzer sind verantwortlich für die Kommunikation dieser Anhaltspunkt für die Benutzer in der immersive Kopfhörer.</span><span class="sxs-lookup"><span data-stu-id="21422-442">The HoloLens users are responsible for communicating this clue to the users in the immersive headset.</span></span> <span data-ttu-id="21422-443">Nach jeder Avatar auf die entsprechende braunen Pad in Vulkane-Datenbankobjekt ausgeführt hat, wird die Rocket Space gestartet.</span><span class="sxs-lookup"><span data-stu-id="21422-443">The rocket will launch to space once each avatar has stepped on its corresponding brown pad inside the volcano.</span></span> <span data-ttu-id="21422-444">Nach 60 Sekunden wird die Szene zurückgesetzt, sodass Sie es nochmal schaffen können.</span><span class="sxs-lookup"><span data-stu-id="21422-444">The scene will reset after 60 seconds so you can do it again.</span></span>

## <a name="see-also"></a><span data-ttu-id="21422-445">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="21422-445">See also</span></span>
* [<span data-ttu-id="21422-446">MR Eingabe 213: Motion-Controller</span><span class="sxs-lookup"><span data-stu-id="21422-446">MR Input 213: Motion controllers</span></span>](mixed-reality-213.md)
